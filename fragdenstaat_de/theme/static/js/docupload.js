!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.docupload=t():(e.Froide=e.Froide||{},e.Froide.components=e.Froide.components||{},e.Froide.components.docupload=t())}(window,function(){return function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)a=s[d],r[a]&&p.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={1:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,o){n=r[e]=[t,o]});t.push(n[2]=o);var i,s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=function(e){return a.p+""+({}[e]||e)+".js"}(e),i=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+o+": "+i+")");a.type=o,a.request=i,n[1](a)}r[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,s.appendChild(l)}return Promise.all(t)},a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;return i.push(["../froide/frontend/javascript/docupload.js",0]),n()}({"../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=c04cb908&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=c04cb908&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=c40a01c2&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=c40a01c2&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5b320582&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5b320582&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/image-page.vue?vue&type=style&index=0&id=adfe0124&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/image-page.vue?vue&type=style&index=0&id=adfe0124&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=b99583ca&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=b99583ca&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/docupload.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/vue/dist/vue.runtime.esm.js"),r=n("../froide/frontend/javascript/lib/vue-helper.js"),i=n("../froide/frontend/javascript/lib/i18n-mixin.js"),a=n("../froide/frontend/javascript/lib/api.js"),s={name:"pdf-review",mixins:[i.a],props:["config","document"],computed:{attachment:function(){return this.document.attachment},canApprove:function(){return!this.attachment.approved&&this.attachment.can_approve},reviewUrl:function(){return this.config.url.redactAttachment.replace("/0/","/".concat(this.document.id,"/"))},approveUrl:function(){return this.config.url.approveAttachment.replace("/0/","/".concat(this.document.id,"/"))},attachmentUrl:function(){return this.config.url.getAttachment.replace("/0/","/".concat(this.document.id,"/"))},approved:function(){return this.attachment.approved}},methods:{approve:function(){var e=this;Object(a.d)(this.approveUrl,{},this.$root.csrfToken).then(function(){Object(a.c)(e.attachmentUrl).then(function(t){e.$emit("documentupdated",{attachment:t})})})}}},l=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.approved?n("a",{staticClass:"btn btn-sm btn-dark mr-1 d-print-none",attrs:{href:e.reviewUrl}},[n("i",{staticClass:"fa fa-paint-brush"}),e._v("\n    "+e._s(e.i18n.redact)+"\n  ")]):n("a",{staticClass:"btn btn-sm btn-primary mr-1 d-print-none",attrs:{href:e.reviewUrl}},[n("i",{staticClass:"fa fa-paint-brush"}),e._v("\n    "+e._s(e.i18n.review)+"\n  ")]),e._v(" "),e.canApprove?n("button",{staticClass:"btn btn-sm btn-success",on:{click:e.approve}},[n("i",{staticClass:"fa fa-check"}),e._v("\n    "+e._s(e.i18n.approve)+"\n  ")]):e._e()])},[],!1,null,null,null);c.options.__file="pdf-review.vue";var u=c.exports,d={name:"pdf-header",mixins:[i.a],props:["config","document"],computed:{attachment:function(){return this.document.attachment},isProtected:function(){return this.attachment.converted&&!this.attachment.approved||this.attachment.redacted},isRedacted:function(){return this.attachment.is_redacted},approved:function(){return this.attachment.approved}}},p=Object(l.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("small",[e._v(e._s(e.document.name))]),e._v(" "),e.approved?e._e():n("span",{staticClass:"badge badge-warning"},[e._v("\n    "+e._s(e.i18n.notPublic)+"\n  ")]),e._v(" "),e.isRedacted?n("span",{staticClass:"badge badge-dark"},[e._v("\n    "+e._s(e.i18n.redacted)+"\n  ")]):e._e(),e._v(" "),e.isProtected?n("span",{staticClass:"badge badge-info",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"{% blocktrans %}This attachment has been converted to PDF and cannot be published.{% endblocktrans %}"}},[e._v("\n    "+e._s(e.i18n.protectedOriginal)+"\n  ")]):e._e()])},[],!1,null,null,null);p.options.__file="pdf-header.vue";var f=p.exports;var h={name:"pdf-document",mixins:[i.a],props:["config","document"],components:{PdfReview:u,PdfHeader:f},data:function(){return{progressTotal:null,progressCurrent:null,ready:!1,pdf:null,numPages:null,pdfPages:[]}},mounted:function(){var e=this;this.document.new&&window.setTimeout(function(){return e.$emit("notnew")},2e3),this.document.pending&&this.checkProgress()},computed:{pages:function(){return this.document.pages},progressUnknown:function(){return null===this.progressPercent},progressPercent:function(){return this.document.progressTotal?this.document.progress/this.document.progressTotal*100:null},progressPercentLabel:function(){return this.progressPercent?"".concat(this.progressPercent,"%"):"100%"}},methods:{checkProgress:function(){var e=this;window.fetch("/api/v1/attachment/".concat(this.document.id,"/")).then(function(e){return e.json()}).then(function(t){!0!==t.pending?!1===t.pending?e.$emit("docupdated",{pending:!1,new:!0,component:"fullpdf-document",site_url:t.site_url,file_url:t.file_url}):document.location.reload():window.setTimeout(function(){return e.checkProgress()},5e3)}).catch(function(){window.setTimeout(function(){return e.checkProgress()},5e3)})}}},g=(n("../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=b99583ca&lang=scss&scoped=true&"),Object(l.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("pdf-header",{attrs:{config:e.config,document:e.document}})],1),e._v(" "),n("div",{staticClass:"card-body",class:{"is-new":e.document.new}},[e.document.uploading?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":e.progressUnknown},style:{width:e.progressPercentLabel},attrs:{role:"progressbar","aria-valuenow":e.document.progress,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e._v(" "),e.document.pending?n("div",[n("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.loading))])]),e._v(" "),n("p",[e._v("\n          "+e._s(e.i18n.documentPending)+"\n        ")])]):[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("a",{staticClass:"btn btn-sm btn-light",attrs:{href:e.document.site_url,target:"_blank"}},[e._v("\n              "+e._s(e.i18n.openAttachmentPage)+"\n            ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-light",on:{click:function(t){e.$emit("loadpdf")}}},[e._v("\n              "+e._s(e.i18n.loadPreview)+"\n            ")])]),e._v(" "),n("div",{staticClass:"ml-auto col-auto"},[n("pdf-review",{attrs:{config:e.config,document:e.document},on:{documentupdated:function(t){e.$emit("docupdated",t)}}})],1)])]],2)])])},[],!1,null,"b99583ca",null));g.options.__file="pdf-document.vue";var m=g.exports,v=n("./node_modules/pdfjs-dist/build/pdf.js"),b=n.n(v);function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w={name:"pdf-document",mixins:[i.a],props:["config","document"],components:{PdfReview:u,PdfHeader:f},data:function(){return{progressTotal:null,progressCurrent:null,ready:!1,pdf:null,numPages:null,pdfPages:[]}},created:function(){"application/pdf"===this.document.filetype&&(b.a.GlobalWorkerOptions.workerSrc=this.config.resources.pdfjsWorker,console.log(this.config.resources.pdfjsWorker,b.a),this.loadDocument())},mounted:function(){var e=this;this.document.new&&window.setTimeout(function(){return e.$emit("notnew")},2e3)},computed:{pages:function(){return"application/pdf"===this.document.filetype?this.pdfPages:this.document.pages}},methods:{loadDocument:function(){var e=this,t=b.a.getDocument({url:this.document.url,isEvalSupported:!1});return t.onProgress=function(t){e.progressCurrent=t.loaded,e.progressTotal=t.total},t.promise.then(function(t){e.workingState=null,e.ready=!0,e.pdf=t,e.numPages=e.pdf.pdfInfo.numPages,function(e){return y(Array(e).keys())}(e.numPages).map(function(e){return e+1}).forEach(function(t){e.pdfPages.push({pageNum:t,url:null}),e.loadPage(t)})})},loadPage:function(e){var t=this;return this.pdf.getPage(e).then(function(n){var o=n.getViewport(1),r=120/o.height,i=Math.round(o.width*r),a=t.getNewCanvas(i,120),s=a.getContext("2d");n.render({canvasContext:s,viewport:n.getViewport(r)}).then(function(){t.pdfPages[e-1].url=a.toDataURL("image/png"),s=null,a=null})})},getNewCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},drawRotated:function(e,t,n){t.translate(e.width/2,e.height/2),t.rotate(Math.PI/2),t.drawImage(n,-n.width/2,-n.height/2),t.rotate(-Math.PI/2),t.translate(-e.width/2,-e.height/2)},imageDataToImageDataUrl:function(e,t,n){var o=this.getNewCanvas(t,n);return o.getContext("2d").putImageData(e,0,0),o.toDataURL("image/png")},prepareImage:function(){var e=this;return new Promise(function(t,n){var o=new window.Image;o.onload=function(){if(o.naturalWidth>o.naturalHeight){var n=e.getNewCanvas(o.naturalHeight,o.naturalWidth),r=n.getContext("2d");e.drawRotated(n,r,o),t(n.toDataURL("image/jpeg"))}else e.image=o,t(e.image)},o.src=window.URL.createObjectURL(e.file)})}}},_=(n("../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=c40a01c2&lang=scss&scoped=true&"),Object(l.a)(w,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("pdf-header",{attrs:{config:e.config,document:e.document}})],1),e._v(" "),n("div",{staticClass:"card-body",class:{"is-new":e.document.new}},[e.document.uploading?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":null===e.document.progressPercent},style:{width:e.document.progress?e.document.progressPercentLabel:"100%"},attrs:{role:"progressbar","aria-valuenow":e.document.progressPercent?e.document.progressPercent:0,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e._v(" "),n("ol",{staticClass:"pages"},e._l(e.pages,function(t){return n("li",{key:t.pageNum,staticClass:"page"},[n("a",{attrs:{href:e.document.site_url,target:"_blank"}},[t.url?n("img",{staticClass:"page-image",attrs:{src:t.url,alt:""}}):e._e()]),e._v(" "),n("div",{staticClass:"text-center"},[n("span",[e._v(e._s(t.pageNum))])])])}),0),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"ml-auto col-auto"},[n("pdf-review",{attrs:{config:e.config,document:e.document},on:{documentupdated:function(t){e.$emit("docupdated",t)}}})],1)])])])])},[],!1,null,"c40a01c2",null));_.options.__file="fullpdf-document.vue";var x=_.exports,C=n("./node_modules/vuedraggable/dist/vuedraggable.js"),P=n.n(C),S=n("./node_modules/exif-js/exif.js"),D=n.n(S),j={name:"image-page",props:["page","pageCount"],data:function(){return{pageContainerStyle:{}}},computed:{pageStyle:function(){var e={transform:"rotate(".concat(this.totalRotate,"deg)")};return this.totalRotate%180!=0?(e.maxHeight="120px",e.maxWidth="120px",e.width="auto"):(e.maxWidth="120px",e.width="100%"),e},totalRotate:function(){return(this.page.rotate||0)+(this.page.implicitRotate||0)},pageNum:function(){return this.page.pageNum},isLast:function(){return this.page.pageNum===this.pageCount},progressUnknown:function(){return null===this.progressPercent},progressPercent:function(){return this.page.progressTotal?this.page.progress/this.page.progressTotal*100:null},progressPercentLabel:function(){return this.progressPercent?"".concat(this.progressPercent,"%"):"100%"}},methods:{splitPages:function(){this.$emit("splitpages",this.page.pageNum)},rotatePage:function(){var e=this;this.$emit("pageupdated",{pageNum:this.pageNum,data:{rotate:((this.page.rotate||0)+90)%360}}),window.setTimeout(function(){return e.calculateContainerStyle()},500)},calculateContainerStyle:function(){if(console.log("update container style"),!this.$refs.pageImage)return{};var e=this.$refs.pageImage.getBoundingClientRect(),t={};t=this.totalRotate%180!=0?{"max-width":"".concat(e.width,"px")}:{},this.pageContainerStyle=t},imageLoaded:function(e){var t=e.target.width,n=e.target.height;if(void 0===this.page.exif){var o=this;D.a.getData(e.target,function(){var e={exif:!0,width:t,height:n},r=D.a.getTag(this,"Orientation");6===r?e.implicitRotate=90:8===r?e.implicitRotate=270:3===r&&(e.implicitRotate=180),o.width>o.height&&e.implicitRotate%180==0&&(e.needsRotation=!0),o.$emit("pageupdated",{pageNum:o.pageNum,data:e})})}}}},T=(n("../froide/frontend/javascript/components/docupload/image-page.vue?vue&type=style&index=0&id=adfe0124&lang=scss&scoped=true&"),Object(l.a)(j,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"scol",style:e.pageContainerStyle},[e.page.url?n("img",{ref:"pageImage",staticClass:"page-image",style:e.pageStyle,attrs:{src:e.page.url,alt:""},on:{load:e.imageLoaded}}):e._e()])]),e._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"scol"},[n("div",{staticClass:"text-left"},[n("button",{staticClass:"btn btn-sm text-muted small",class:{"btn-info":e.page.needsRotation},on:{click:e.rotatePage}},[n("span",{staticClass:"fa fa-rotate-right"})])])]),e._v(" "),n("div",{staticClass:"scol"},[n("div",{staticClass:"text-center"},[e._v("\n        "+e._s(e.page.pageNum)+"\n      ")])]),e._v(" "),n("div",{staticClass:"scol"},[e.isLast?e._e():n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-sm text-muted small",on:{click:e.splitPages}},[n("span",{staticClass:"fa fa-scissors"})])])])]),e._v(" "),e.page.uploading?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":e.progressUnknown},style:{width:e.progressPercentLabel},attrs:{role:"progressbar","aria-valuenow":e.page.progress,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()])},[],!1,null,"adfe0124",null));T.options.__file="image-page.vue";var I=T.exports;var O={name:"image-document",mixins:[i.a],props:["config","document"],components:{draggable:P.a,ImagePage:I},data:function(){return{progressTotal:null,progressCurrent:null,converting:!1}},mounted:function(){var e=this;this.document.new&&window.setTimeout(function(){return e.$emit("notnew")},2e3)},computed:{numPages:function(){return this.pages.length},pages:{get:function(){return this.document.pages},set:function(e){this.$emit("pageschanged",e)}},documentName:{get:function(){return this.document.name},set:function(e){this.$emit("namechanged",e)}},anyUploads:function(){return this.pages.some(function(e){return e.uploading})}},methods:{splitPages:function(e){this.$emit("splitpages",e)},convertImages:function(){var e=this;this.converting=!0;var t={action:"convert_to_pdf",title:this.document.name,images:this.pages.map(function(e){return{id:e.attachment.id,rotate:(e.rotate||0)+(e.implicitRotate||0)}})};Object(a.default)(this.$root.url.convertAttachments,t,this.$root.csrfToken).then(function(t){e.$emit("imagesconverted",{document:t,imageDoc:e.document})})}}},E=(n("../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5b320582&lang=scss&scoped=true&"),Object(l.a)(O,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v("\n      "+e._s(e.i18n._("newDocumentPageCount",{count:e.numPages}))+"\n    ")]),e._v(" "),n("div",{staticClass:"card-body",class:{"is-new":e.document.new}},[e.converting?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":null===e.progressCurrent},style:{width:e.progressCurrent?e.progressCurrent:"100%"},attrs:{role:"progressbar","aria-valuenow":e.progressCurrent?e.progressCurrent:0,"aria-valuemin":"0","aria-valuemax":"100"}})]):n("div",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"page-label"}},[e._v(e._s(e.i18n.documentTitle))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.documentName,expression:"documentName"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.i18n.documentTitlePlaceholder},domProps:{value:e.documentName},on:{input:function(t){t.target.composing||(e.documentName=t.target.value)}}})]),e._v(" "),n("draggable",{staticClass:"pages",on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.pages,callback:function(t){e.pages=t},expression:"pages"}},e._l(e.pages,function(t){return n("image-page",{key:t.pageNum,attrs:{page:t,"page-count":e.pages.length},on:{pageupdated:function(t){e.$emit("pageupdated",Object.assign({},{document:e.document},t))},splitpages:e.splitPages}})}),1)],1),e._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-md-8 text-muted"},[e._v("\n          "+e._s(e.i18n.imageDocumentExplanation)+" \n        ")]),e._v(" "),n("div",{staticClass:"col-md-4"},[n("p",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.anyUploads||e.converting},on:{click:e.convertImages}},[e._v("\n              "+e._s(e.i18n.convertImages)+"\n            ")])])])])])])])},[],!1,null,"5b320582",null));E.options.__file="image-document.vue";var F=E.exports;function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R={name:"document-uploader",mixins:[i.a],props:["config","message"],components:{PdfDocument:m,ImageDocument:F,FullpdfDocument:x},data:function(){return{documents:[],otherAttachments:[],showOther:!1,imageDocId:0}},mounted:function(){this.$root.url=this.config.url,this.$root.csrfToken=document.querySelector("[name=csrfmiddlewaretoken]").value;var e=U(this.buildDocuments(),2),t=e[0],n=e[1];this.documents=t,this.otherAttachments=n},computed:{isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},methods:{buildDocuments:function(){var e=this,t=[],n=[],o=[];return this.message.attachments.forEach(function(r){e.isDocumentAttachment(r)?e.config.settings.pdf_filetypes.includes(r.filetype)?t.push({id:r.id,name:r.name,url:r.file_url,filetype:"application/pdf",site_url:r.site_url,type:"pdf",pending:r.pending,pages:null,component:"pdf-document",attachment:r}):n.push({id:r.id,name:r.name,url:r.file_url,attachment:r}):o.push({id:r.id,name:r.name,filetype:r.filetype,pending:r.pending,url:r.site_url,attachment:r})}),n.length>0&&(n=this.prepareImages(n),t.unshift(this.getNewImageDoc({pages:n,new:!1}))),[t,o]},isDocumentAttachment:function(e){return null===e.converted&&(!!this.config.settings.document_filetypes.includes(e.filetype)||!!(this.config.settings.image_filetypes.includes(e.filetype)&&e.size<=51200))},prepareImages:function(e){return e=e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(e,t){return e.pageNum=t+1,e})},pagesChanged:function(e,t){t.forEach(function(e,t){e.pageNum=t+1}),e.pages=t},loadPdf:function(e){e.component="fullpdf-document"},pageUpdated:function(e){var t=e.document,n=e.pageNum,r=e.data,i=t.pages[n-1];for(var a in r)o.a.set(i,a,r[a])},splitPages:function(e,t){var n=e.pages.slice(t);n.forEach(function(e,t){e.pageNum=t+1}),e.pages=e.pages.slice(0,t),e.new=!0,this.documents=N(this.documents.filter(function(e){return"imagedoc"===e.type})).concat([this.getNewImageDoc({pages:n})],N(this.documents.filter(function(e){return"pdf"===e.type})))},getNewImageDoc:function(e){return this.imageDocId+=1,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){k(e,t,n[t])})}return e}({id:"imagedoc"+this.imageDocId,filetype:null,type:"imagedoc",new:!0,name:"",component:"image-document"},e)},imagesConverted:function(e){var t=e.document,n=e.imageDoc;this.documents=this.documents.filter(function(e){return e.id!==n.id}),this.documents=N(this.documents.filter(function(e){return"imagedoc"===e.type})).concat([{id:t.id,name:t.name,url:t.file_url,filetype:"application/pdf",site_url:t.site_url,type:"pdf",new:!0,pages:null,pending:!0,component:"pdf-document",attachment:t}],N(this.documents.filter(function(e){return"pdf"===e.type})))},documentUpdated:function(e,t){if(null!==t)for(var n in t)e[n]=t[n];else this.documents=this.documents.filter(function(t){return t.id!==e.id})},uploadPage:function(e){var t=this;return new Promise(function(n,r){var i=new FormData;i.append("".concat(t.config.settings.attachment_form_prefix,"-files"),e.file);var a=new window.XMLHttpRequest;a.open("POST",t.config.url.addAttachment),a.setRequestHeader("X-CSRFToken",t.$root.csrfToken),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),(a.upload?a.upload:a).addEventListener("progress",function(t){t.lengthComputable?(o.a.set(e,"progress",t.loaded),o.a.set(e,"progressTotal",t.total)):(o.a.set(e,"progress",null),o.a.set(e,"progressTotal",null))}),a.onreadystatechange=function(){if(4===a.readyState){var t,o;e.uploading=!1;try{t=JSON.parse(a.responseText)}catch(t){return e.failed=!0,n(null)}return o=1===t.added.length?t.added[0]:t.updated[0],e.url&&0===e.url.indexOf("blob:")&&window.URL.revokeObjectURL(e.url),e.url=o.file_url,e.site_url=o.site_url,e.filetype=o.filetype,e.id=o.id,e.attachment=o,n(e)}},a.send(i)})},filesSelected:function(e){for(var t=this,n=e.target.files,o=[],r=[],i=0;i<n.length;i+=1){var a,s=n[i];if(this.config.settings.pdf_filetypes.includes(s.type))o.push((k(a={id:"".concat(s.name,"-").concat(s.lastModified,"-").concat(s.size),filetype:s.type,file:s,size:s.size,progress:0,type:"pdf",uploading:!0},"progress",0),k(a,"new",!0),k(a,"name",s.name),k(a,"component","pdf-document"),k(a,"url",window.URL.createObjectURL(s)),a));else if(this.config.settings.image_filetypes.includes(s.type)){var l={id:"".concat(s.name,"-").concat(s.lastModified,"-").concat(s.size),name:s.name,filetype:s.type,file:s,size:s.size,uploading:!0,progress:0,type:"image",url:window.URL.createObjectURL(s)};r.push(l),o.push(l)}else o.push({id:"".concat(s.name,"-").concat(s.lastModified,"-").concat(s.size),name:s.name,file:s,uploading:!0,progress:0,filetype:s.type,type:"other"})}if(r.length>0){r=this.prepareImages(r);var c=this.documents.filter(function(e){return"imagedoc"===e.type});if(0===c.length){r[0];this.documents=[this.getNewImageDoc({pages:r})].concat(N(this.documents))}else{var u=c[0];u.pages=N(u.pages).concat(N(r.map(function(e,t){return e.pageNum=u.pages.length+t+1,e})))}}this.otherAttachments=N(this.otherAttachments).concat(N(o.filter(function(e){return"other"===e.type}))),this.documents=N(o.filter(function(e){return"pdf"===e.type})).concat(N(this.documents));var d=Promise.resolve();o.forEach(function(e){d=d.then(function(){return t.uploadPage(e)})})}}},M=(n("../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=c04cb908&lang=scss&scoped=true&"),Object(l.a)(R,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document-uploader mb-3 mt-3"},[n("div",{staticClass:"upload"},[n("label",{class:{"btn btn-primary isMobile":e.isMobile}},[n("i",{staticClass:"fa fa-cloud-upload"}),e._v(" "),e.isMobile?n("span",[e._v("\n        "+e._s(e.i18n.takePicture)+"\n      ")]):n("span",[e._v("\n        "+e._s(e.i18n.uploadPdfOrPicture)+"\n        "),n("br")]),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],attrs:{type:"file",accept:"image/*,application/pdf",multiple:""},on:{change:e.filesSelected}})])]),e._v(" "),n("div",{staticClass:"documents"},e._l(e.documents,function(t){return n(t.component,{key:t.id,tag:"component",attrs:{document:t,config:e.config},on:{pageschanged:function(n){e.pagesChanged(t,n)},loadpdf:function(n){e.loadPdf(t)},splitpages:function(n){e.splitPages(t,n)},imagesconverted:e.imagesConverted,namechanged:function(e){t.name=e},docupdated:function(n){e.documentUpdated(t,n)},pageupdated:e.pageUpdated,notnew:function(e){t.new=!1}}})}),1),e._v(" "),e.otherAttachments.length>0?n("div",[n("p",[n("button",{staticClass:"btn btn-link",on:{click:function(t){e.showOther=!e.showOther}}},[e._v("\n        "+e._s(e.i18n.showIrrelevantAttachments)+"\n      ")])]),e._v(" "),e.showOther?n("ul",e._l(e.otherAttachments,function(t){return n("li",{key:t.name},[n("a",{attrs:{href:t.url,target:"_blank"}},[e._v("\n          "+e._s(t.name)+"\n        ")])])}),0):e._e()]):e._e()])},[],!1,null,"c04cb908",null));M.options.__file="document-uploader.vue";var L=M.exports;function A(e){new o.a({components:{DocumentUploader:L},render:Object(r.a)(e,L)}).$mount(e)}o.a.config.productionTip=!1;for(var B=document.querySelectorAll(".document-uploader"),X=0;X<B.length;X+=1)A(B[X]);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#document-uploader");e&&A(e)})},"../froide/frontend/javascript/lib/api.js":function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.d(t,"a",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getJson",value:function(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){if(o.status>=400)try{return n(JSON.parse(o.responseText))}catch(e){return n(o.responseText)}t(JSON.parse(o.responseText))},o.onerror=function(){n(o.statusText)},o.send()})}},{key:"getObjects",value:function(e){return new Promise(function(t,n){e.then(function(e){return t(e.objects)}).catch(function(e){return n(e)})})}},{key:"getJsonObjects",value:function(e){var t=this;return new Promise(function(n,o){t.getJson(e).then(function(e){return n(e.objects)}).catch(function(e){return o(e)})})}},{key:"getPublicBody",value:function(e){var t=this.config.url.getPublicBody.replace(/\/0\//,"/".concat(e,"/"));return this.getJson(t)}},{key:"autocompletePublicBody",value:function(e){var t=encodeURIComponent(e),n=this.config.url.autocompletePublicBody+"?query="+t;return this.getJsonObjects(n)}},{key:"getUser",value:function(){return this.getJson(this.config.url.user)}},{key:"getJsonForUrl",value:function(e,t,n){var o=!1;return void 0!==t&&t&&(o=!0,e=e+"?q="+encodeURIComponent(t)),void 0!==n&&function(){var t=[],r=function(e){var o=n[e];null!==o&&(Array.isArray(o)||(o=[o]),o.forEach(function(n){t.push(e+"="+encodeURIComponent(n))}))};for(var i in n)r(i);e+=o?"&":"?",e+=t.join("&")}(),this.getJson(e)}},{key:"searchPublicBodies",value:function(e,t){return this.getJsonForUrl(this.config.url.searchPublicBody,e,t)}},{key:"listPublicBodies",value:function(e,t){return this.getJsonForUrl(this.config.url.listPublicBodies,e,t)}},{key:"getLawsForPublicBodies",value:function(e,t){t=t||{};var n={},o=[];return e.forEach(function(e){e.laws.forEach(function(e){if("string"==typeof e){if(void 0!==t[e])return;var r=e.split("/"),i=r[r.length-2];void 0===n[i]&&(n[i]=!0,o.push(i))}})}),0===o.length?Promise.resolve([]):this.getJsonForUrl(this.config.url.listLaws,null,{id:o.join(",")}).then(function(e){return e.objects})}},{key:"listJurisdictions",value:function(e,t){return this.getJsonForUrl(this.config.url.listJurisdictions,e,t)}},{key:"listCategories",value:function(e,t){return this.getJsonForUrl(this.config.url.listCategories,e,t)}},{key:"listClassifications",value:function(e,t){return this.getJsonForUrl(this.config.url.listClassifications,e,t)}},{key:"searchFoiRequests",value:function(e){var t=encodeURIComponent(e),n=this.config.url.searchRequests+"?q="+t;return this.getJsonObjects(n)}}]),e}();function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return window.fetch(e,{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":n},body:JSON.stringify(t)}).then(function(e){return e.json()})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return window.fetch(e,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()})}},"../froide/frontend/javascript/lib/i18n-mixin.js":function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=new RegExp(/\$\{(\w+)\}/g),i=document.querySelector("html").lang,a={computed:{i18n:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({_replacer:function(e){return function(t,n,o,r){return"count"===n&&e.count>=1e3?e.count.toLocaleString(i):e[n]}},_:function(e,t){var n=this[e];return Array.isArray(n)?void 0!==t.count&&(t.count>1||0===t.count)?n[1].replace(r,this._replacer(t)):n[0].replace(r,this._replacer(t)):n.replace(r,this._replacer(t))}},this.config.i18n)}}};t.a=a},"../froide/frontend/javascript/lib/vue-helper.js":function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}function i(e,t){return function(){return t(e.tag,{domProps:{innerHTML:e.innerHTML}})}}function a(e,t){"string"==typeof e&&(e=document.querySelector(e));var n=function(e){for(var t=e.attributes,n={},o=0;o<t.length;o+=1){var i=t[o];if(("v"!==i.name[0]||"-"!==i.name[1])&&"id"!==i.name&&"class"!==i.name){var a=i.value,s=i.name;":"===i.name[0]&&(s=i.name.substring(1),"{"!==i.value[0]&&"["!==i.value[0]||(a=JSON.parse(i.value)),"true"===i.value&&(a=!0)),n[r(s)]=a}}return n}(e),a=function(e){for(var t=e.querySelectorAll("[slot]"),n={},o=0;o<t.length;o+=1){var r=t[o];n[r.attributes.slot.value]={tag:r.tagName.toLowerCase(),innerHTML:r.innerHTML}}return n}(e),s=function(e){var t={};if(e.id&&(t.attrs={id:e.id}),e.className){var n=e.className.split(" ");t.class={},n.forEach(function(e){t.class[e.trim()]=!0})}return t}(e);return function(e){var r=function(e,t){var n={};for(var o in e)n[o]=i(e[o],t);return n}(a,e);return e(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({props:n,scopedSlots:r},s))}}n.d(t,"a",function(){return a})},"./node_modules/exif-js/exif.js":function(e,t,o){var r;(function(){var o=!1,i=function(e){return e instanceof i?e:this instanceof i?void(this.EXIFwrapped=e):new i(e)};e.exports&&(t=e.exports=i),t.EXIF=i;var a=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},s=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},l=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function d(e){return!!e.exifdata}function p(e,t){function n(n){var r=f(n);e.exifdata=r||{};var a=function(e){var t=new DataView(e);o&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return o&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<r;){if(i(t,n)){var a=t.getUint8(n+7);a%2!=0&&(a+=1),0===a&&(a=4);var s=n+8+a,l=t.getUint16(n+6+a);return g(e,s,l)}n++}}(n);if(e.iptcdata=a||{},i.isXmpEnabled){var s=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);o&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return o&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,i=new DOMParser;for(;n<r-4;){if("http"==b(t,n,4)){var a=n-1,s=t.getUint16(n-2)-1,l=b(t,a,s),c=l.indexOf("xmpmeta>")+8,u=(l=l.substring(l.indexOf("<x:xmpmeta"),c)).indexOf("x:xmpmeta")+10;l=l.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(u);var d=i.parseFromString(l,"text/xml");return _(d)}n++}}(n);e.xmpdata=s||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),o=n.length,r=new ArrayBuffer(o),i=new Uint8Array(r),a=0;a<o;a++)i[a]=n.charCodeAt(a);return r}(e.src));else if(/^blob\:/i.test(e.src)){(a=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,function(e){a.readAsArrayBuffer(e)})}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var a;(a=new FileReader).onload=function(e){o&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},a.readAsArrayBuffer(e)}}function f(e){var t=new DataView(e);if(o&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return o&&console.log("Not a valid JPEG"),!1;for(var n,r=2,i=e.byteLength;r<i;){if(255!=t.getUint8(r))return o&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),o&&console.log(n),225==n)return o&&console.log("Found 0xFFE1 marker"),y(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}var h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function g(e,t,n){for(var o,r,i,a,s=new DataView(e),l={},c=t;c<t+n;)28===s.getUint8(c)&&2===s.getUint8(c+1)&&(a=s.getUint8(c+2))in h&&((i=s.getInt16(c+3))+5,r=h[a],o=b(s,c+5,i),l.hasOwnProperty(r)?l[r]instanceof Array?l[r].push(o):l[r]=[l[r],o]:l[r]=o),c++;return l}function m(e,t,n,r,i){var a,s,l,c=e.getUint16(n,!i),u={};for(l=0;l<c;l++)a=n+12*l+2,!(s=r[e.getUint16(a,!i)])&&o&&console.log("Unknown tag: "+e.getUint16(a,!i)),u[s]=v(e,a,t,n,i);return u}function v(e,t,n,o,r){var i,a,s,l,c,u,d=e.getUint16(t+2,!r),p=e.getUint32(t+4,!r),f=e.getUint32(t+8,!r)+n;switch(d){case 1:case 7:if(1==p)return e.getUint8(t+8,!r);for(i=p>4?f:t+8,a=[],l=0;l<p;l++)a[l]=e.getUint8(i+l);return a;case 2:return b(e,i=p>4?f:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!r);for(i=p>2?f:t+8,a=[],l=0;l<p;l++)a[l]=e.getUint16(i+2*l,!r);return a;case 4:if(1==p)return e.getUint32(t+8,!r);for(a=[],l=0;l<p;l++)a[l]=e.getUint32(f+4*l,!r);return a;case 5:if(1==p)return c=e.getUint32(f,!r),u=e.getUint32(f+4,!r),(s=new Number(c/u)).numerator=c,s.denominator=u,s;for(a=[],l=0;l<p;l++)c=e.getUint32(f+8*l,!r),u=e.getUint32(f+4+8*l,!r),a[l]=new Number(c/u),a[l].numerator=c,a[l].denominator=u;return a;case 9:if(1==p)return e.getInt32(t+8,!r);for(a=[],l=0;l<p;l++)a[l]=e.getInt32(f+4*l,!r);return a;case 10:if(1==p)return e.getInt32(f,!r)/e.getInt32(f+4,!r);for(a=[],l=0;l<p;l++)a[l]=e.getInt32(f+8*l,!r)/e.getInt32(f+4+8*l,!r);return a}}function b(e,t,o){var r="";for(n=t;n<t+o;n++)r+=String.fromCharCode(e.getUint8(n));return r}function y(e,t){if("Exif"!=b(e,t,4))return o&&console.log("Not valid EXIF data! "+b(e,t,4)),!1;var n,r,i,d,p,f=t+6;if(18761==e.getUint16(f))n=!1;else{if(19789!=e.getUint16(f))return o&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(f+2,!n))return o&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var h=e.getUint32(f+4,!n);if(h<8)return o&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(f+4,!n)),!1;if((r=m(e,f,f+h,s,n)).ExifIFDPointer)for(i in d=m(e,f,f+r.ExifIFDPointer,a,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":d[i]=u[i][d[i]];break;case"ExifVersion":case"FlashpixVersion":d[i]=String.fromCharCode(d[i][0],d[i][1],d[i][2],d[i][3]);break;case"ComponentsConfiguration":d[i]=u.Components[d[i][0]]+u.Components[d[i][1]]+u.Components[d[i][2]]+u.Components[d[i][3]]}r[i]=d[i]}if(r.GPSInfoIFDPointer)for(i in p=m(e,f,f+r.GPSInfoIFDPointer,l,n)){switch(i){case"GPSVersionID":p[i]=p[i][0]+"."+p[i][1]+"."+p[i][2]+"."+p[i][3]}r[i]=p[i]}return r.thumbnail=function(e,t,n,o){var r=function(e,t,n){var o=e.getUint16(t,!n);return e.getUint32(t+2+12*o,!n)}(e,t+n,o);if(!r)return{};if(r>e.byteLength)return{};var i=m(e,t,t+r,c,o);if(i.Compression)switch(i.Compression){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var a=t+i.JpegIFOffset,s=i.JpegIFByteCount;i.blob=new Blob([new Uint8Array(e.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i.Compression)}else 2==i.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}(e,f,h,n),r}function w(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var o=e.attributes.item(n);t["@attributes"][o.nodeName]=o.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes.item(r),a=i.nodeName;if(null==t[a])t[a]=w(i);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(w(i))}}return t}function _(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var o=e.children.item(n),r=o.attributes;for(var i in r){var a=r[i],s=a.nodeName,l=a.nodeValue;void 0!==s&&(t[s]=l)}var c=o.nodeName;if(void 0===t[c])t[c]=w(o);else{if(void 0===t[c].push){var u=t[c];t[c]=[],t[c].push(u)}t[c].push(w(o))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(d(e)?t&&t.call(e):p(e,t),!0)},i.getTag=function(e,t){if(d(e))return e.exifdata[t]},i.getIptcTag=function(e,t){if(d(e))return e.iptcdata[t]},i.getAllTags=function(e){if(!d(e))return{};var t,n=e.exifdata,o={};for(t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o},i.getAllIptcTags=function(e){if(!d(e))return{};var t,n=e.iptcdata,o={};for(t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o},i.pretty=function(e){if(!d(e))return"";var t,n=e.exifdata,o="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?o+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":o+=t+" : ["+n[t].length+" values]\r\n":o+=t+" : "+n[t]+"\r\n");return o},i.readFromBinaryFile=function(e){return f(e)},void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}).call(this)},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=c04cb908&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=c40a01c2&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5b320582&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/image-page.vue?vue&type=style&index=0&id=adfe0124&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=b99583ca&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/sortablejs/Sortable.js":function(e,t,n){var o,r;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
!function(i){"use strict";void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,o,r,i,a,s,l,c,u,d,p,f,h,g,m,v,b,y,w,_,x,C,P,S=[],D=!1,j=!1,T=!1,I=[],O=!1,E=!1,F=/\s+/g,k="Sortable"+(new Date).getTime(),N=window,U=N.document,R=N.parseInt,M=N.setTimeout,L=N.jQuery||N.Zepto,A=N.Polymer,B={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),G=!!navigator.userAgent.match(/Edge/i),$=G||X?"cssFloat":"float",H="draggable"in U.createElement("div"),Y=function(){if(X)return!1;var e=U.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),W=!1,J=!1,q=Math.abs,V=Math.min,z=[],K=function(e,t){var n=me(e),o=R(n.width),r=Ce(e,0,t),i=Ce(e,1,t),a=r&&me(r),s=i&&me(i),l=a&&R(a.marginLeft)+R(a.marginRight)+ke(r).width,c=s&&R(s.marginLeft)+R(s.marginRight)+ke(i).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=o&&"none"===n[$]||i&&"none"===n[$]&&l+c>o)?"vertical":"horizontal"},Z=function(e,t,n,o,r){var i=ke(n),a="vertical"===o?i.left:i.top,s="vertical"===o?i.right:i.bottom,l="vertical"===o?e:t;return a<l&&l<s},Q=function(e,t){if(!e||!e.getBoundingClientRect)return N;var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=me(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n||!n.getBoundingClientRect||n===U.body)return N;if(o||t)return n;o=!0}}}while(n=n.parentNode);return N},ee=Te(function(e,t,n,o){if(t.scroll){var r=n?n[k]:window,i=t.scrollSensitivity,a=t.scrollSpeed,u=e.clientX,d=e.clientY,p=(window.innerWidth,window.innerHeight,!1);l!==n&&(te(),s=t.scroll,c=t.scrollFn,!0===s&&(s=Q(n,!0),l=s));var f=0,h=s;do{var g,m,v,y,w,_,x,C,P,j=h,T=ke(j),I=T.top,O=T.bottom,E=T.left,F=T.right,R=T.width,M=T.height;if(j!==N?(g=j.scrollWidth,m=j.scrollHeight,v=me(j),_=R<g&&("auto"===v.overflowX||"scroll"===v.overflowX),x=M<m&&("auto"===v.overflowY||"scroll"===v.overflowY),C=j.scrollLeft,P=j.scrollTop):(g=U.documentElement.scrollWidth,m=U.documentElement.scrollHeight,v=me(U.documentElement),_=R<g&&("auto"===v.overflowX||"scroll"===v.overflowX||"visible"===v.overflowX),x=M<m&&("auto"===v.overflowY||"scroll"===v.overflowY||"visible"===v.overflowY),C=U.documentElement.scrollLeft,P=U.documentElement.scrollTop),y=_&&(q(F-u)<=i&&C+R<g)-(q(E-u)<=i&&!!C),w=x&&(q(O-d)<=i&&P+M<m)-(q(I-d)<=i&&!!P),!S[f])for(var L=0;L<=f;L++)S[L]||(S[L]={});S[f].vx==y&&S[f].vy==w&&S[f].el===j||(S[f].el=j,S[f].vx=y,S[f].vy=w,clearInterval(S[f].pid),!j||0==y&&0==w||(p=!0,S[f].pid=setInterval(function(){o&&0===this.layer&&ue.active._emulateDragOver(!0);var t=S[this.layer].vy?S[this.layer].vy*a:0,n=S[this.layer].vx?S[this.layer].vx*a:0;"function"==typeof c&&"continue"!==c.call(r,n,t,e,b,S[this.layer].el)||(S[this.layer].el===N?N.scrollTo(N.pageXOffset+n,N.pageYOffset+t):(S[this.layer].el.scrollTop+=t,S[this.layer].el.scrollLeft+=n))}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&h!==N&&(h=Q(h,!1)));D=p}},30),te=function(){S.forEach(function(e){clearInterval(e.pid)}),S=[]},ne=function(e){function t(e,n){return function(o,r,i,a){var s=o.options.group.name&&r.options.group.name&&o.options.group.name===r.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,r,i,a),n)(o,r,i,a);var l=(n?o:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},o=e.group;o&&"object"==typeof o||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},oe=function(t){e&&e.parentNode&&e.parentNode[k]&&e.parentNode[k]._computeIsAligned(t)},re=function(e,t){for(var n=t;!n[k];)n=n.parentNode;return e===n},ie=function(e,t,n){for(var o=e.parentNode;o&&!o[k];)o=o.parentNode;o&&o[k][n](Ie(t,{artificialBubble:!0}))},ae=function(){!Y&&n&&me(n,"display","none")},se=function(){!Y&&n&&me(n,"display","")};U.addEventListener("click",function(e){if(T)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),T=!1,!1},!0);var le,ce=function(t){if(e){var n=function(e,t){for(var n=0;n<I.length;n++)if(!I[n].children.length){var o=ke(I[n]),r=I[n][k].options.emptyInsertThreshold,i=e>=o.left-r&&e<=o.right+r,a=t>=o.top-r&&t<=o.bottom+r;if(i&&a)return I[n]}}(t.clientX,t.clientY);n&&n[k]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:n,rootEl:n})}};function ue(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Ie({},t),e[k]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return K(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:R(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ue.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var o in n)!(o in t)&&(t[o]=n[o]);for(var r in ne(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&H,t.supportPointer?fe(e,"pointerdown",this._onTapStart):(fe(e,"mousedown",this._onTapStart),fe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fe(e,"dragover",this),fe(e,"dragenter",this)),I.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function de(e,t,n,o){if(e){n=n||U;do{if(">*"===t&&e.parentNode===n||je(e,t)||o&&e===n)return e;if(e===n)break}while(e=pe(e))}return null}function pe(e){return e.host&&e!==U&&e.host.nodeType?e.host:e.parentNode}function fe(e,t,n){e.addEventListener(t,n,B)}function he(e,t,n){e.removeEventListener(t,n,B)}function ge(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(F," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(F," ")}}function me(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return U.defaultView&&U.defaultView.getComputedStyle?n=U.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function ve(e){var t="";do{var n=me(e,"transform");n&&"none"!==n&&(t=n+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function be(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,i=o.length;if(n)for(;r<i;r++)n(o[r],r);return o}return[]}function ye(e,t,n,r,i,a,s,l,c){var u,d=(e=e||t[k]).options,p="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||X||G?(u=U.createEvent("Event")).initEvent(n,!0,!0):u=new CustomEvent(n,{bubbles:!0,cancelable:!0}),u.to=i||t,u.from=a||t,u.item=r||t,u.clone=o,u.oldIndex=s,u.newIndex=l,u.originalEvent=c,t&&t.dispatchEvent(u),d[p]&&d[p].call(e,u)}function we(e,t,n,o,r,i,a,s){var l,c,u=e[k],d=u.options.onMove;return!window.CustomEvent||X||G?(l=U.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=r||t,l.relatedRect=i||ke(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function _e(e){e.draggable=!1}function xe(){W=!1}function Ce(t,o,r){for(var i=0,a=0,s=t.children;a<s.length;){if("none"!==s[a].style.display&&s[a]!==n&&s[a]!==e&&de(s[a],r.draggable,t,!1)){if(i===o)return s[a];i++}a++}return null}function Pe(e){var t=e.lastElementChild;return t===n&&(t=e.children[e.childElementCount-2]),t||null}function Se(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function De(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==o&&n++;return n}function je(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}function Te(e,t){return function(){if(!le){var n=arguments,o=this;le=M(function(){1===n.length?e.call(o,n[0]):e.apply(o,n),le=void 0},t)}}}function Ie(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Oe(e){return A&&A.dom?A.dom(e).cloneNode(!0):L?L(e).clone(!0)[0]:e.cloneNode(!0)}function Ee(e){return M(e,0)}function Fe(e){return clearTimeout(e)}function ke(e,t,n){if(e.getBoundingClientRect||e===N){var o,r,i,a,s,l,c;if(e!==N?(r=(o=e.getBoundingClientRect()).top,i=o.left,a=o.bottom,s=o.right,l=o.height,c=o.width):(r=0,i=0,a=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),n&&e!==N){if(t=t||e.parentNode,!X)do{if(t&&t.getBoundingClientRect&&"none"!==me(t,"transform")){var u=t.getBoundingClientRect();r-=u.top+R(me(t,"border-top-width")),i-=u.left+R(me(t,"border-left-width")),a=r+o.height,s=i+o.width;break}}while(t=t.parentNode);var d=ve(e),p=d&&d.a,f=d&&d.d;d&&(a=(r/=f)+(l/=f),s=(i/=p)+(c/=p))}return{top:r,left:i,bottom:a,right:s,width:c,height:l}}}return U.addEventListener("dragover",ce),U.addEventListener("mousemove",ce),ue.prototype={constructor:ue,_computeIsAligned:function(t){var o;if(n&&!Y?(ae(),o=U.elementFromPoint(t.clientX,t.clientY),se()):o=t.target,o=de(o,this.options.draggable,this.el,!1),!J&&e&&e.parentNode===this.el){for(var r=this.el.children,i=0;i<r.length;i++)de(r[i],this.options.draggable,this.el,!1)&&r[i]!==o&&(r[i].sortableMouseAligned=Z(t.clientX,t.clientY,r[i],this._getDirection(t,null),this.options));de(o,this.options.draggable,this.el,!0)||(w=null),J=!0,M(function(){J=!1},30)}},_getDirection:function(t,n){return"function"==typeof this.options.direction?this.options.direction.call(this,t,n,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n,o=this,r=this.el,i=this.options,s=i.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],u=(c||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,p=i.filter;if(function(e){z.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&z.push(o)}}(r),(!X||t.artificialBubble||re(r,u))&&!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||i.disabled||d.isContentEditable))if(u=de(u,i.draggable,r,!1)){if(a!==u){if(n=De(u,i.draggable),"function"==typeof p){if(p.call(this,t,u,this))return ye(o,d,"filter",u,r,r,n),void(s&&t.cancelable&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=de(d,e.trim(),r,!1))return ye(o,e,"filter",u,r,r,n),!0})))return void(s&&t.cancelable&&t.preventDefault());i.handle&&!de(d,i.handle,r,!1)||this._prepareDragStart(t,c,u,n)}}else X&&ie(r,t,"_onTapStart")}},_handleAutoScroll:function(t,n){if(e&&this.options.scroll){var o=t.clientX,r=t.clientY,i=U.elementFromPoint(o,r),a=this;if(n||G||X){ee(t,a.options,i,n);var s=Q(i,!0);!D||h&&o===g&&r===m||(h&&clearInterval(h),h=setInterval(function(){if(e){var i=Q(U.elementFromPoint(o,r),!0);i!==s&&(s=i,te(),ee(t,a.options,s,n))}},10),g=o,m=r)}else{if(!a.options.bubbleScroll||Q(i,!0)===window)return void te();ee(t,a.options,Q(i,!1),!1)}}},_prepareDragStart:function(n,o,s,l){var c,d=this,f=d.el,h=d.options,g=f.ownerDocument;s&&!e&&s.parentNode===f&&(r=f,t=(e=s).parentNode,i=e.nextSibling,a=s,p=h.group,u=l,v={target:e,clientX:(o||n).clientX,clientY:(o||n).clientY},this._lastX=(o||n).clientX,this._lastY=(o||n).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){d._disableDelayedDrag(),e.draggable=d.nativeDraggable,d._triggerDragStart(n,o),ye(d,r,"choose",e,r,r,u),ge(e,h.chosenClass,!0)},h.ignore.split(",").forEach(function(t){be(e,t.trim(),_e)}),h.supportPointer?(fe(g,"pointerup",d._onDrop),fe(g,"pointercancel",d._onDrop)):(fe(g,"mouseup",d._onDrop),fe(g,"touchend",d._onDrop),fe(g,"touchcancel",d._onDrop)),h.delay?(fe(g,"mouseup",d._disableDelayedDrag),fe(g,"touchend",d._disableDelayedDrag),fe(g,"touchcancel",d._disableDelayedDrag),fe(g,"mousemove",d._delayedDragTouchMoveHandler),fe(g,"touchmove",d._delayedDragTouchMoveHandler),h.supportPointer&&fe(g,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=M(c,h.delay)):c())},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;V(q(t.clientX-this._lastX),q(t.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),he(e,"mouseup",this._disableDelayedDrag),he(e,"touchend",this._disableDelayedDrag),he(e,"touchcancel",this._disableDelayedDrag),he(e,"mousemove",this._delayedDragTouchMoveHandler),he(e,"touchmove",this._delayedDragTouchMoveHandler),he(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||("touch"==t.pointerType?t:null),!this.nativeDraggable||n?this.options.supportPointer?fe(U,"pointermove",this._onTouchMove):fe(U,n?"touchmove":"mousemove",this._onTouchMove):(fe(e,"dragend",this),fe(r,"dragstart",this._onDragStart));try{U.selection?Ee(function(){U.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(t){if(j=!1,r&&e){this.nativeDraggable&&(fe(U,"dragover",this._handleAutoScroll),fe(U,"dragover",oe));var n=this.options;!t&&ge(e,n.dragClass,!1),ge(e,n.ghostClass,!0),me(e,"transform",""),ue.active=this,t&&this._appendGhost(),ye(this,r,"start",e,r,r,u)}else this._nulling()},_emulateDragOver:function(t){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!t)return;this._lastX=b.clientX,this._lastY=b.clientY,ae();for(var n=U.elementFromPoint(b.clientX,b.clientY),o=n;n&&n.shadowRoot;)o=n=n.shadowRoot.elementFromPoint(b.clientX,b.clientY);if(o)do{if(o[k])if(o[k]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:n,rootEl:o})&&!this.options.dragoverBubble)break;n=o}while(o=o.parentNode);e.parentNode[k]._computeIsAligned(b),se()}},_onTouchMove:function(e){if(v){if(!e.cancelable)return;var t=this.options,o=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=n&&ve(n),s=n&&a&&a.a,l=n&&a&&a.d,c=(i.clientX-v.clientX+r.x)/(s||1),u=(i.clientY-v.clientY+r.y)/(l||1),d=e.touches?"translate3d("+c+"px,"+u+"px,0)":"translate("+c+"px,"+u+"px)";if(!ue.active&&!j){if(o&&V(q(i.clientX-this._lastX),q(i.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}this._handleAutoScroll(i,!0),y=!0,b=i,me(n,"webkitTransform",d),me(n,"mozTransform",d),me(n,"msTransform",d),me(n,"transform",d),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!n){var t=ke(e,this.options.fallbackOnBody?U.body:r,!0),o=(me(e),this.options);ge(n=e.cloneNode(!0),o.ghostClass,!1),ge(n,o.fallbackClass,!0),ge(n,o.dragClass,!0),me(n,"box-sizing","border-box"),me(n,"margin",0),me(n,"top",t.top),me(n,"left",t.left),me(n,"width",t.width),me(n,"height",t.height),me(n,"opacity","0.8"),me(n,"position","fixed"),me(n,"zIndex","100000"),me(n,"pointerEvents","none"),o.fallbackOnBody&&U.body.appendChild(n)||r.appendChild(n)}},_onDragStart:function(t,n){var i=this,a=t.dataTransfer,s=i.options;(o=Oe(e)).draggable=!1,o.style["will-change"]="",this._hideClone(),ge(o,i.options.chosenClass,!1),i._cloneId=Ee(function(){i.options.removeCloneOnHide||r.insertBefore(o,e),ye(i,r,"clone",e)}),!n&&ge(e,s.dragClass,!0),n?(T=!0,i._loopId=setInterval(i._emulateDragOver,50)):(he(U,"mouseup",i._onDrop),he(U,"touchend",i._onDrop),he(U,"touchcancel",i._onDrop),he(U,"pointercancel",i._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(i,a,e)),fe(U,"drop",i),me(e,"transform","translateZ(0)")),j=!0,i._dragStartId=Ee(i._dragStarted.bind(i,n)),fe(U,"selectstart",i)},_onDragOver:function(o){var a,s,l,c=this.el,d=o.target,h=this.options,g=h.group,m=ue.active,v=p===g,b=h.sort,S=this;if(!W&&(!X||o.rootEl||o.artificialBubble||re(c,d))){if(void 0!==o.preventDefault&&o.cancelable&&o.preventDefault(),y=!0,d=de(d,h.draggable,c,!0),de(o.target,null,e,!0)||d.animated)return H();if(d!==e&&(T=!1),m&&!h.disabled&&(v?b||(l=!r.contains(e)):f===this||(this.lastPutMode=p.checkPull(this,m,e,o))&&g.checkPut(this,m,e,o))){var j=this._getDirection(o,d);if(a=ke(e),l)return this._hideClone(),t=r,i?r.insertBefore(e,i):r.appendChild(e),H();if(0===c.children.length||c.children[0]===n||function(e,t,n){var o=ke(Pe(n)),r="vertical"===t?e.clientY:e.clientX,i="vertical"===t?e.clientX:e.clientY,a="vertical"===t?o.bottom:o.right,s="vertical"===t?o.left:o.top,l="vertical"===t?o.right:o.bottom;return i>s&&i<l&&r>a}(o,j,c)&&!e.animated){if(0!==c.children.length&&c.children[0]!==n&&c===o.target&&(d=Pe(c)),d&&(s=ke(d)),v?m._hideClone():m._showClone(this),!1!==we(r,c,e,a,d,s,o,!!d))return c.appendChild(e),t=c,P=null,Y(),this._animate(a,e),d&&this._animate(s,d),H()}else if(d&&d!==e&&void 0!==d.parentNode[k]&&d!==c){var I,F=0,R=d.sortableMouseAligned,L=e.parentNode!==c,A=function(e,t){var n=Q(n,!0),o=ke(e)[t];for(;n;){var r=ke(n)[t];if(!("top"===t||"left"===t?o>=r:o<=r))return!0;if(n===N)break;n=Q(n,!1)}return!1}(d,"vertical"===j?"top":"left");if(w!==d&&(x=null,I=ke(d)["vertical"===j?"top":"left"],O=!1),function(t,n,o){var r=t===e&&P||ke(t),i=n===e&&P||ke(n),a="vertical"===o?r.left:r.top,s="vertical"===o?r.right:r.bottom,l="vertical"===o?r.width:r.height,c="vertical"===o?i.left:i.top,u="vertical"===o?i.right:i.bottom,d="vertical"===o?i.width:i.height;return a===c||s===u||a+l/2===c+d/2}(e,d,j)&&R||L||A||h.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&(E=h.invertSwap||L||D||A),F=function(t,n,o,r,i,a,s){var l=ke(n),c="vertical"===o?t.clientY:t.clientX,u="vertical"===o?l.height:l.width,d="vertical"===o?l.top:l.left,p="vertical"===o?l.bottom:l.right,f=ke(e),h=!1;if(!a)if(s&&C<u*r)if(!O&&(1===_?c>d+u*i/2:c<p-u*i/2)&&(O=!0),O)h=!0;else{"vertical"===o?f.top:f.left,"vertical"===o?f.bottom:f.right;if(1===_?c<d+C:c>p-C)return-1*_}else if(c>d+u*(1-r)/2&&c<p-u*(1-r)/2)return c>d+u/2?-1:1;if((h=h||a)&&(c<d+u*i/2||c>p-u*i/2))return c>d+u/2?1:-1;return 0}(o,d,j,h.swapThreshold,null==h.invertedSwapThreshold?h.swapThreshold:h.invertedSwapThreshold,E,w===d),x="swap"):(F=function(t,n){var o=De(e,n.draggable),r=De(t,n.draggable);return o<r?1:-1}(d,h),x="insert"),0===F)return H();P=null,w=d,_=F,s=ke(d);var B=d.nextElementSibling,G=!1,$=we(r,c,e,a,d,s,o,G=1===F);if(!1!==$)return 1!==$&&-1!==$||(G=1===$),W=!0,M(xe,30),v?m._hideClone():m._showClone(this),G&&!B?c.appendChild(e):d.parentNode.insertBefore(e,G?B:d),t=e.parentNode,void 0===I||E||(C=q(I-ke(d)["vertical"===j?"top":"left"])),Y(),!L&&this._animate(s,d),this._animate(a,e),H()}if(c.contains(e))return H()}return X&&!o.rootEl&&ie(c,o,"_onDragOver"),!1}function H(){return m&&(ge(e,f?f.options.ghostClass:m.options.ghostClass,!1),ge(e,h.ghostClass,!0)),f!==S&&S!==ue.active?f=S:S===ue.active&&(f=null),(d===e&&!e.animated||d===c&&!d.animated)&&(w=null),h.dragoverBubble||o.rootEl||d===U||(S._handleAutoScroll(o),e.parentNode[k]._computeIsAligned(o)),!h.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),!0}function Y(){ye(S,r,"change",d,c,r,u,De(e,h.draggable),o)}},_animate:function(t,n){var o=this.options.animation;if(o){var r=ke(n);if(n===e&&(P=r),1===t.nodeType&&(t=ke(t)),t.left+t.width/2!==r.left+r.width/2||t.top+t.height/2!==r.top+r.height/2){var i=ve(this.el),a=i&&i.a,s=i&&i.d;me(n,"transition","none"),me(n,"transform","translate3d("+(t.left-r.left)/(a||1)+"px,"+(t.top-r.top)/(s||1)+"px,0)"),n.offsetWidth,me(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),me(n,"transform","translate3d(0,0,0)")}"number"==typeof n.animated&&clearTimeout(n.animated),n.animated=M(function(){me(n,"transition",""),me(n,"transform",""),n.animated=!1},o)}},_offUpEvents:function(){var e=this.el.ownerDocument;he(U,"touchmove",this._onTouchMove),he(U,"pointermove",this._onTouchMove),he(e,"mouseup",this._onDrop),he(e,"touchend",this._onDrop),he(e,"pointerup",this._onDrop),he(e,"touchcancel",this._onDrop),he(e,"pointercancel",this._onDrop),he(U,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;j=!1,D=!1,E=!1,O=!1,clearInterval(this._loopId),clearInterval(h),te(),clearTimeout(le),le=void 0,clearTimeout(this._dragStartTimer),Fe(this._cloneId),Fe(this._dragStartId),he(U,"mousemove",this._onTouchMove),this.nativeDraggable&&(he(U,"drop",this),he(s,"dragstart",this._onDragStart),he(U,"dragover",this._handleAutoScroll),he(U,"dragover",oe)),this._offUpEvents(),a&&(y&&(a.cancelable&&a.preventDefault(),!l.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),(r===t||f&&"clone"!==f.lastPutMode)&&o&&o.parentNode&&o.parentNode.removeChild(o),e&&(this.nativeDraggable&&he(e,"dragend",this),_e(e),e.style["will-change"]="",ge(e,f?f.options.ghostClass:this.options.ghostClass,!1),ge(e,this.options.chosenClass,!1),ye(this,r,"unchoose",e,t,r,u,null,a),r!==t?((d=De(e,l.draggable))>=0&&(ye(null,t,"add",e,t,r,u,d,a),ye(this,r,"remove",e,t,r,u,d,a),ye(null,t,"sort",e,t,r,u,d,a),ye(this,r,"sort",e,t,r,u,d,a)),f&&f.save()):e.nextSibling!==i&&(d=De(e,l.draggable))>=0&&(ye(this,r,"update",e,t,r,u,d,a),ye(this,r,"sort",e,t,r,u,d,a)),ue.active&&(null!=d&&-1!==d||(d=u),ye(this,r,"end",e,t,r,u,d,a),this.save()))),this._nulling()},_nulling:function(){r=e=t=n=i=o=a=s=l=S.length=h=g=m=v=b=y=d=u=w=_=P=f=p=ue.active=null,z.forEach(function(e){e.checked=!0}),z.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,r=n.length,i=this.options;o<r;o++)de(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Se(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,o){var r=n.children[o];de(r,this.options.draggable,n,!1)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return de(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&ne(n)},destroy:function(){var e=this.el;e[k]=null,he(e,"mousedown",this._onTapStart),he(e,"touchstart",this._onTapStart),he(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(he(e,"dragover",this),he(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),I.splice(I.indexOf(this.el),1),this.el=e=null},_hideClone:function(){o.cloneHidden||(me(o,"display","none"),o.cloneHidden=!0,o.parentNode&&this.options.removeCloneOnHide&&o.parentNode.removeChild(o))},_showClone:function(t){"clone"===t.lastPutMode?o.cloneHidden&&(r.contains(e)&&!this.options.group.revertClone?r.insertBefore(o,e):i?r.insertBefore(o,i):r.appendChild(o),this.options.group.revertClone&&this._animate(e,o),me(o,"display",""),o.cloneHidden=!1):this._hideClone()}},fe(U,"touchmove",function(e){(ue.active||j)&&e.cancelable&&e.preventDefault()}),ue.utils={on:fe,off:he,css:me,find:be,is:function(e,t){return!!de(e,t,e,!1)},extend:Ie,throttle:Te,closest:de,toggleClass:ge,clone:Oe,index:De,nextTick:Ee,cancelNextTick:Fe,detectDirection:K,getChild:Ce},ue.create=function(e,t){return new ue(e,t)},ue.version="1.8.1",ue})},"./node_modules/vuedraggable/dist/vuedraggable.js":function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){Array.from||(Array.from=function(e){return[].slice.call(e)});var t=n("./node_modules/sortablejs/Sortable.js");e.exports=function(e){function t(e){e.parentElement.removeChild(e)}function n(e,t,n){var o=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function i(e,t){var n=this;this.$nextTick(function(){return n.$emit(e.toLowerCase(),t)})}var a=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(a,s).map(function(e){return"on"+e}),c=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var n=t[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var o=0,i=t,a=this.$slots,s=a.header,l=a.footer;s&&(o=s.length,i=i?[].concat(r(s),r(i)):[].concat(r(s))),l&&(i=i?[].concat(r(i),r(l)):[].concat(r(l))),this.headerOffset=o;var c=null,u=function(e,t){c=function(e,t,n){return void 0==n?e:((e=null==e?{}:e)[t]=n,e)}(c,e,t)};if(u("attrs",this.$attrs),this.componentData){var d=this.componentData,p=d.on,f=d.props;u("on",p),u("props",f)}return e(this.element,c,i)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var n={};a.forEach(function(e){n["on"+e]=function(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),i.call(t,e,n)}}.call(t,e)}),s.forEach(function(e){n["on"+e]=i.bind(t,e)});var r=o({},this.options,n,{onMove:function(e,n){return t.onDragMove(e,n)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new e(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==l.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,n){if(!e)return[];var o=e.map(function(e){return e.elm}),i=[].concat(r(t)).map(function(e){return o.indexOf(e)});return n?i.filter(function(e){return-1!==e}):i}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(r(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,r=this.getUnderlyingPotencialDraggableComponent(t);if(!r)return{component:r};var i=r.realList,a={list:i,component:r};if(t!==n&&i&&r.getUnderlyingVm){var s=r.getUnderlyingVm(n);if(s)return o(s,a)}return a},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),c=e.item},onDragAdd:function(e){this.updateEvenemt(e);var n=e.item._underlying_vm_;if(void 0!==n){t(e.item);var o=this.getVmIndex(e.newIndex);this.spliceList(o,0,n),this.computeIndexes();var r={element:n,newIndex:o};this.emitChanges({added:r})}},onDragRemove:function(e){if(this.updateEvenemt(e),n(this.rootContainer,e.item,e.oldIndex),this.isCloning)t(e.clone);else{var o=this.context.index;this.spliceList(o,1);var r={element:this.context.element,oldIndex:o};this.resetTransitionData(o),this.emitChanges({removed:r})}},onDragUpdate:function(e){this.updateEvenemt(e),t(e.item),n(e.from,e.item,e.oldIndex);var o=this.context.index,r=this.getVmIndex(e.newIndex);this.updatePosition(o,r);var i={element:this.context.element,oldIndex:o,newIndex:r};this.emitChanges({moved:i})},updateEvenemt:function(e){this.updateProperty(e,"newIndex"),this.updateProperty(e,"oldIndex")},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=[].concat(r(t.to.children)).filter(function(e){return"none"!==e.style.display}),o=n.indexOf(t.related),i=e.component.getVmIndex(o);return-1==n.indexOf(c)&&t.willInsertAfter?i+1:i},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(e),i=this.context,a=this.computeFutureIndex(r,e);return o(i,{futureIndex:a}),o(e,{relatedContext:r,draggedContext:i}),n(e,t)},onDragEnd:function(e){this.computeIndexes(),c=null}}}}(t)}()},0:function(e,t){},1:function(e,t){},2:function(e,t){}})});
//# sourceMappingURL=docupload.js.map