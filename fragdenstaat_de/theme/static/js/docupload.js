!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.docupload=t():(e.Froide=e.Froide||{},e.Froide.components=e.Froide.components||{},e.Froide.components.docupload=t())}(window,function(){return function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)a=s[u],r[a]&&p.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={1:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,o){n=r[e]=[t,o]});t.push(n[2]=o);var i,s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=function(e){return a.p+""+({}[e]||e)+".js"}(e),i=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+o+": "+i+")");a.type=o,a.request=i,n[1](a)}r[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,s.appendChild(l)}return Promise.all(t)},a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;return i.push(["../froide/frontend/javascript/docupload.js",0]),n()}({"../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=43700b89&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=43700b89&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=3ccd255c&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=3ccd255c&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5e4850b8&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5e4850b8&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=08857e2c&lang=scss&scoped=true&":function(e,t,n){"use strict";var o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=08857e2c&lang=scss&scoped=true&");n.n(o).a},"../froide/frontend/javascript/docupload.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/vue/dist/vue.runtime.esm.js"),r=n("../froide/frontend/javascript/lib/vue-helper.js"),i=n("../froide/frontend/javascript/lib/i18n-mixin.js");var a={name:"pdf-document",mixins:[i.a],props:["config","document"],components:{},data:function(){return{progressTotal:null,progressCurrent:null,ready:!1,pdf:null,numPages:null,pdfPages:[]}},mounted:function(){var e=this;this.document.new&&window.setTimeout(function(){return e.$emit("notnew")},2e3),this.document.pending&&this.checkProgress()},computed:{pages:function(){return this.document.pages}},methods:{checkProgress:function(){var e=this;window.fetch("/api/v1/attachment/".concat(this.document.id,"/")).then(function(e){return e.json()}).then(function(t){t.pending?window.setTimeout(function(){return e.checkProgress()},5e3):e.$emit("docupdated",{pending:!1,new:!0,component:"fullpdf-document",site_url:t.site_url,file_url:t.file_url})})}}},s=(n("../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=08857e2c&lang=scss&scoped=true&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),l=Object(s.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("small",[e._v(e._s(e.document.name))])]),e._v(" "),n("div",{staticClass:"card-body",class:{"is-new":e.document.new}},[e.document.uploading?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":null===e.document.progressPercent},style:{width:e.document.progress?e.document.progressPercentLabel:"100%"},attrs:{role:"progressbar","aria-valuenow":e.document.progressPercent?e.document.progressPercent:0,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e._v(" "),e.document.pending?n("div",[n("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.loading))])]),e._v(" "),n("p",[e._v("\n          "+e._s(e.i18n.documentPending)+"\n        ")])]):[n("a",{staticClass:"btn btn-sm btn-light",attrs:{href:e.document.site_url,target:"_blank"}},[e._v("\n          "+e._s(e.i18n.openAttachmentPage)+"\n        ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-light",on:{click:function(t){e.$emit("loadpdf")}}},[e._v("\n          "+e._s(e.i18n.loadPreview)+"\n        ")])]],2)])])},[],!1,null,"08857e2c",null);l.options.__file="pdf-document.vue";var c=l.exports,d=n("./node_modules/pdfjs-dist/build/pdf.js"),u=n.n(d);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f={name:"pdf-document",mixins:[i.a],props:["config","document"],components:{},data:function(){return{progressTotal:null,progressCurrent:null,ready:!1,pdf:null,numPages:null,pdfPages:[]}},created:function(){"application/pdf"===this.document.filetype&&(u.a.GlobalWorkerOptions.workerSrc=this.config.resources.pdfjsWorker,console.log(this.config.resources.pdfjsWorker,u.a),this.loadDocument())},mounted:function(){var e=this;this.document.new&&window.setTimeout(function(){return e.$emit("notnew")},2e3)},computed:{pages:function(){return"application/pdf"===this.document.filetype?this.pdfPages:this.document.pages}},methods:{loadDocument:function(){var e=this,t=u.a.getDocument({url:this.document.url,isEvalSupported:!1});return t.onProgress=function(t){e.progressCurrent=t.loaded,e.progressTotal=t.total},t.promise.then(function(t){e.workingState=null,e.ready=!0,e.pdf=t,e.numPages=e.pdf.pdfInfo.numPages,function(e){return p(Array(e).keys())}(e.numPages).map(function(e){return e+1}).forEach(function(t){e.pdfPages.push({pageNum:t,url:null}),e.loadPage(t)})})},loadPage:function(e){var t=this;return this.pdf.getPage(e).then(function(n){var o=n.getViewport(1),r=120/o.height,i=Math.round(o.width*r),a=t.getNewCanvas(i,120),s=a.getContext("2d");n.render({canvasContext:s,viewport:n.getViewport(r)}).then(function(){t.pdfPages[e-1].url=a.toDataURL("image/png"),s=null,a=null})})},getNewCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},drawRotated:function(e,t,n){t.translate(e.width/2,e.height/2),t.rotate(Math.PI/2),t.drawImage(n,-n.width/2,-n.height/2),t.rotate(-Math.PI/2),t.translate(-e.width/2,-e.height/2)},imageDataToImageDataUrl:function(e,t,n){var o=this.getNewCanvas(t,n);return o.getContext("2d").putImageData(e,0,0),o.toDataURL("image/png")},prepareImage:function(){var e=this;return new Promise(function(t,n){var o=new window.Image;o.onload=function(){if(o.naturalWidth>o.naturalHeight){var n=e.getNewCanvas(o.naturalHeight,o.naturalWidth),r=n.getContext("2d");e.drawRotated(n,r,o),t(n.toDataURL("image/jpeg"))}else e.image=o,t(e.image)},o.src=window.URL.createObjectURL(e.file)})}}},h=(n("../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=3ccd255c&lang=scss&scoped=true&"),Object(s.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("small",[e._v(e._s(e.document.name))])]),e._v(" "),n("div",{staticClass:"card-body",class:{"is-new":e.document.new}},[e.document.uploading?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":null===e.document.progressPercent},style:{width:e.document.progress?e.document.progressPercentLabel:"100%"},attrs:{role:"progressbar","aria-valuenow":e.document.progressPercent?e.document.progressPercent:0,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e._v(" "),n("ol",{staticClass:"pages"},e._l(e.pages,function(t){return n("li",{key:t.pageNum,staticClass:"page"},[n("a",{attrs:{href:e.document.site_url,target:"_blank"}},[t.url?n("img",{staticClass:"page-image",attrs:{src:t.url,alt:""}}):e._e()]),e._v(" "),n("div",{staticClass:"text-center"},[n("span",[e._v(e._s(t.pageNum))])])])}),0)])])])},[],!1,null,"3ccd255c",null));h.options.__file="fullpdf-document.vue";var m=h.exports,g=n("./node_modules/vuedraggable/dist/vuedraggable.js"),v=n.n(g);var b={name:"image-document",mixins:[i.a],props:["config","document"],components:{draggable:v.a},data:function(){return{progressTotal:null,progressCurrent:null,converting:!1}},mounted:function(){var e=this;this.document.new&&window.setTimeout(function(){return e.$emit("notnew")},2e3)},computed:{numPages:function(){return this.pages.length},pages:{get:function(){return this.document.pages},set:function(e){this.$emit("pageschanged",e)}},documentName:{get:function(){return this.document.name},set:function(e){this.$emit("namechanged",e)}},anyUploads:function(){return this.pages.some(function(e){return e.uploading})}},methods:{splitPages:function(e){e&&this.$emit("splitpages",e)},convertImages:function(){var e=this;this.converting=!0;var t={action:"convert_to_pdf",title:this.document.name,images:this.pages.map(function(e){return{id:e.attachment.id,rotate:0}})};(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return window.fetch(e,{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRFToken":n},body:JSON.stringify(t)}).then(function(e){return e.json()})})(this.$root.url.convertAttachments,t,this.$root.csrfToken).then(function(t){e.$emit("imagesconverted",{document:t,imageDoc:e.document})})}}},y=(n("../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5e4850b8&lang=scss&scoped=true&"),Object(s.a)(b,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v("\n      "+e._s(e.i18n._("newDocumentPageCount",{count:e.numPages}))+"\n    ")]),e._v(" "),n("div",{staticClass:"card-body",class:{"is-new":e.document.new}},[e.converting?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":null===e.progressCurrent},style:{width:e.progressCurrent?e.progressCurrent:"100%"},attrs:{role:"progressbar","aria-valuenow":e.progressCurrent?e.progressCurrent:0,"aria-valuemin":"0","aria-valuemax":"100"}})]):n("div",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"page-label"}},[e._v(e._s(e.i18n.documentTitle))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.documentName,expression:"documentName"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.i18n.documentTitlePlaceholder},domProps:{value:e.documentName},on:{input:function(t){t.target.composing||(e.documentName=t.target.value)}}})]),e._v(" "),n("draggable",{staticClass:"pages",on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.pages,callback:function(t){e.pages=t},expression:"pages"}},e._l(e.pages,function(t){return n("div",{key:t.pageNum,staticClass:"page"},[t.url?n("img",{staticClass:"page-image",attrs:{src:t.url,alt:""}}):e._e(),e._v(" "),t.pageNum!=e.pages.length?n("div",{staticClass:"float-right"},[n("button",{staticClass:"btn btn-sm text-muted small",on:{click:function(n){e.splitPages(t.pageNum)}}},[n("span",{staticClass:"fa fa-scissors"})])]):e._e(),e._v(" "),n("div",{staticClass:"text-center"},[e._v("\n              "+e._s(t.pageNum)+"\n            ")]),e._v(" "),t.uploading?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",class:{"progress-bar-animated progress-bar-striped":null===t.progressPercent},style:{width:t.progress?t.progressPercentLabel:"100%"},attrs:{role:"progressbar","aria-valuenow":t.progressPercent?t.progressPercent:0,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()])}),0)],1),e._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-md-8 text-muted"},[e._v("\n          "+e._s(e.i18n.imageDocumentExplanation)+" \n        ")]),e._v(" "),n("div",{staticClass:"col-md-4"},[n("p",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.anyUploads||e.converting},on:{click:e.convertImages}},[e._v("\n              "+e._s(e.i18n.convertImages)+"\n            ")])])])])])])])},[],!1,null,"5e4850b8",null));y.options.__file="image-document.vue";var _=y.exports;function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j={name:"document-uploader",mixins:[i.a],props:["config","message"],components:{PdfDocument:c,ImageDocument:_,FullpdfDocument:m},data:function(){var e=C(this.buildDocuments(),2);return{documents:e[0],otherAttachments:e[1],showOther:!1,imageDocId:0}},mounted:function(){this.$root.url=this.config.url,this.$root.csrfToken=document.querySelector("[name=csrfmiddlewaretoken]").value},computed:{isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},methods:{buildDocuments:function(){var e=this,t=[],n=[],o=[];return this.message.attachments.forEach(function(r){e.isDocumentAttachment(r)?e.config.settings.pdf_filetypes.includes(r.filetype)?t.push({id:r.id,name:r.name,url:r.file_url,filetype:"application/pdf",site_url:r.site_url,type:"pdf",pending:r.pending,pages:null,component:"pdf-document",attachment:r}):n.push({id:r.id,name:r.name,url:r.file_url,attachment:r}):o.push({id:r.id,name:r.name,filetype:r.filetype,pending:r.pending,url:r.site_url,attachment:r})}),n.length>0&&(n=this.prepareImages(n),t.unshift(this.getNewImageDoc({pages:n,new:!1}))),[t,o]},isDocumentAttachment:function(e){return null===e.converted&&(!!this.config.settings.document_filetypes.includes(e.filetype)||!!(this.config.settings.image_filetypes.includes(e.filetype)&&e.size<=51200))},prepareImages:function(e){return e=e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(e,t){return e.pageNum=t+1,e})},pagesChanged:function(e,t){t.forEach(function(e,t){e.pageNum=t+1}),e.pages=t},loadPdf:function(e){e.component="fullpdf-document"},splitPages:function(e,t){var n=e.pages.slice(t);e.pages=e.pages.slice(0,t),e.new=!0,this.documents=x(this.documents.filter(function(e){return"imagedoc"===e.type})).concat([this.getNewImageDoc({pages:n})],x(this.documents.filter(function(e){return"pdf"===e.type})))},getNewImageDoc:function(e){return this.imageDocId+=1,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){w(e,t,n[t])})}return e}({id:"imagedoc"+this.imageDocId,filetype:null,type:"imagedoc",new:!0,name:"",component:"image-document"},e)},imagesConverted:function(e){var t=e.document,n=e.imageDoc;this.documents=this.documents.filter(function(e){return e.id!==n.id}),this.documents=x(this.documents.filter(function(e){return"imagedoc"===e.type})).concat([{id:t.id,name:t.name,url:t.file_url,filetype:"application/pdf",site_url:t.site_url,type:"pdf",new:!0,pages:null,pending:!0,component:"pdf-document",attachment:t}],x(this.documents.filter(function(e){return"pdf"===e.type})))},documentUpdated:function(e,t){for(var n in t)e[n]=t[n]},uploadPage:function(e){var t=this;return e.progress=0,e.uploading=!0,e.progressTotal=null,new Promise(function(n,o){var r=new FormData;r.append("".concat(t.config.settings.attachment_form_prefix,"-files"),e.file);var i=new window.XMLHttpRequest;i.open("POST",t.config.url.addAttachment),i.setRequestHeader("X-CSRFToken",t.$root.csrfToken),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),(i.upload?i.upload:i).addEventListener("progress",function(t){t.lengthComputable?(e.progress=t.loaded,e.progressTotal=t.total,e.progressPercent=Math.min(100,Math.round(e.progress/e.progressTotal*100)),e.progressPercentLabel=e.progressPercent+"%"):(e.progress=null,e.progressPercent=null)}),i.onreadystatechange=function(){if(4===i.readyState){var t,o;e.uploading=!1;try{t=JSON.parse(i.responseText)}catch(t){return e.failed=!0,n(null)}return o=1===t.added.length?t.added[0]:t.updated[0],e.url&&0===e.url.indexOf("blob:")&&window.URL.revokeObjectURL(e.url),e.url=o.file_url,e.site_url=o.site_url,e.filetype=o.filetype,e.id=o.id,e.attachment=o,n(e)}},i.send(r)})},filesSelected:function(e){for(var t=this,n=e.target.files,o=[],r=[],i=0;i<n.length;i+=1){var a=n[i];if(this.config.settings.pdf_filetypes.includes(a.type))o.push({id:"".concat(a.name,"-").concat(a.lastModified,"-").concat(a.size),filetype:a.type,file:a,size:a.size,progress:0,type:"pdf",new:!0,name:a.name,component:"pdf-document",url:window.URL.createObjectURL(a)});else if(this.config.settings.image_filetypes.includes(a.type)){var s={id:"".concat(a.name,"-").concat(a.lastModified,"-").concat(a.size),name:a.name,filetype:a.type,file:a,size:a.size,type:"image",url:window.URL.createObjectURL(a)};r.push(s),o.push(s)}else o.push({id:"".concat(a.name,"-").concat(a.lastModified,"-").concat(a.size),name:a.name,file:a,filetype:a.type,type:"other"})}if(r.length>0){r=this.prepareImages(r);var l=this.documents.filter(function(e){return"imagedoc"===e.type});if(0===l.length){r[0];this.documents=[this.getNewImageDoc({pages:r})].concat(x(this.documents))}else{var c=l[0];c.pages=x(c.pages).concat(x(r.map(function(e,t){return e.pageNum=c.pages.length+t+1,e})))}}this.otherAttachments=x(this.otherAttachments).concat(x(o.filter(function(e){return"other"===e.type}))),this.documents=x(o.filter(function(e){return"pdf"===e.type})).concat(x(this.documents));var d=Promise.resolve();o.forEach(function(e){d.uploading=!0,d=d.then(function(){return t.uploadPage(e)})})}}},D=(n("../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=43700b89&lang=scss&scoped=true&"),Object(s.a)(j,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"document-uploader mb-3 mt-3"},[n("div",{staticClass:"upload"},[n("label",{class:{"btn btn-primary isMobile":e.isMobile}},[n("i",{staticClass:"fa fa-cloud-upload"}),e._v(" "),e.isMobile?n("span",[e._v("\n        "+e._s(e.i18n.takePicture)+"\n      ")]):n("span",[e._v("\n        "+e._s(e.i18n.uploadPdfOrPicture)+"\n        "),n("br")]),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],attrs:{type:"file",accept:"image/*,application/pdf",multiple:""},on:{change:e.filesSelected}})])]),e._v(" "),n("div",{staticClass:"documents"},e._l(e.documents,function(t){return n(t.component,{key:t.id,tag:"component",attrs:{document:t,config:e.config},on:{pageschanged:function(n){e.pagesChanged(t,n)},loadpdf:function(n){e.loadPdf(t)},splitpages:function(n){e.splitPages(t,n)},imagesconverted:e.imagesConverted,namechanged:function(e){t.name=e},docupdated:function(n){e.documentUpdated(t,n)},notnew:function(e){t.new=!1}}})}),1),e._v(" "),e.otherAttachments.length>0?n("div",[n("p",[n("button",{staticClass:"btn btn-link",on:{click:function(t){e.showOther=!e.showOther}}},[e._v("\n        "+e._s(e.i18n.showIrrelevantAttachments)+"\n      ")])]),e._v(" "),e.showOther?n("ul",e._l(e.otherAttachments,function(t){return n("li",{key:t.name},[n("a",{attrs:{href:t.url,target:"_blank"}},[e._v("\n          "+e._s(t.name)+"\n        ")])])}),0):e._e()]):e._e()])},[],!1,null,"43700b89",null));D.options.__file="document-uploader.vue";var P=D.exports;function S(e){new o.a({components:{DocumentUploader:P},render:Object(r.a)(e,P)}).$mount(e)}o.a.config.productionTip=!1;for(var T=document.querySelectorAll(".document-uploader"),O=0;O<T.length;O+=1)S(T[O]);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#document-uploader");e&&S(e)})},"../froide/frontend/javascript/lib/i18n-mixin.js":function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=new RegExp(/\$\{(\w+)\}/g),i=document.querySelector("html").lang,a={computed:{i18n:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({_replacer:function(e){return function(t,n,o,r){return"count"===n&&e.count>=1e3?e.count.toLocaleString(i):e[n]}},_:function(e,t){var n=this[e];return Array.isArray(n)?void 0!==t.count&&(t.count>1||0===t.count)?n[1].replace(r,this._replacer(t)):n[0].replace(r,this._replacer(t)):n.replace(r,this._replacer(t))}},this.config.i18n)}}};t.a=a},"../froide/frontend/javascript/lib/vue-helper.js":function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}function i(e,t){return function(){return t(e.tag,{domProps:{innerHTML:e.innerHTML}})}}function a(e,t){"string"==typeof e&&(e=document.querySelector(e));var n=function(e){for(var t=e.attributes,n={},o=0;o<t.length;o+=1){var i=t[o];if(("v"!==i.name[0]||"-"!==i.name[1])&&"id"!==i.name&&"class"!==i.name){var a=i.value,s=i.name;":"===i.name[0]&&(s=i.name.substring(1),"{"!==i.value[0]&&"["!==i.value[0]||(a=JSON.parse(i.value)),"true"===i.value&&(a=!0)),n[r(s)]=a}}return n}(e),a=function(e){for(var t=e.querySelectorAll("[slot]"),n={},o=0;o<t.length;o+=1){var r=t[o];n[r.attributes.slot.value]={tag:r.tagName.toLowerCase(),innerHTML:r.innerHTML}}return n}(e),s=function(e){var t={};if(e.id&&(t.attrs={id:e.id}),e.className){var n=e.className.split(" ");t.class={},n.forEach(function(e){t.class[e.trim()]=!0})}return t}(e);return function(e){var r=function(e,t){var n={};for(var o in e)n[o]=i(e[o],t);return n}(a,e);return e(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({props:n,scopedSlots:r},s))}}n.d(t,"a",function(){return a})},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/document-uploader.vue?vue&type=style&index=0&id=43700b89&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/fullpdf-document.vue?vue&type=style&index=0&id=3ccd255c&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/image-document.vue?vue&type=style&index=0&id=5e4850b8&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/docupload/pdf-document.vue?vue&type=style&index=0&id=08857e2c&lang=scss&scoped=true&":function(e,t,n){},"./node_modules/sortablejs/Sortable.js":function(e,t,n){var o,r;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
!function(i){"use strict";void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,o,r,i,a,s,l,c,d,u,p,f,h,m,g,v,b,y,_,w,x,C,j,D=[],P=!1,S=!1,T=!1,O=[],E=!1,I=!1,M=/\s+/g,N="Sortable"+(new Date).getTime(),k=window,A=k.document,L=k.parseInt,X=k.setTimeout,$=k.jQuery||k.Zepto,R=k.Polymer,Y={capture:!1,passive:!1},H=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),F=!!navigator.userAgent.match(/Edge/i),B=F||H?"cssFloat":"float",U="draggable"in A.createElement("div"),W=function(){if(H)return!1;var e=A.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),q=!1,z=!1,V=Math.abs,J=Math.min,G=[],K=function(e,t){var n=ge(e),o=L(n.width),r=Ce(e,0,t),i=Ce(e,1,t),a=r&&ge(r),s=i&&ge(i),l=a&&L(a.marginLeft)+L(a.marginRight)+Ne(r).width,c=s&&L(s.marginLeft)+L(s.marginRight)+Ne(i).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=o&&"none"===n[B]||i&&"none"===n[B]&&l+c>o)?"vertical":"horizontal"},Z=function(e,t,n,o,r){var i=Ne(n),a="vertical"===o?i.left:i.top,s="vertical"===o?i.right:i.bottom,l="vertical"===o?e:t;return a<l&&l<s},Q=function(e,t){if(!e||!e.getBoundingClientRect)return k;var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=ge(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n||!n.getBoundingClientRect||n===A.body)return k;if(o||t)return n;o=!0}}}while(n=n.parentNode);return k},ee=Te(function(e,t,n,o){if(t.scroll){var r=n?n[N]:window,i=t.scrollSensitivity,a=t.scrollSpeed,d=e.clientX,u=e.clientY,p=(window.innerWidth,window.innerHeight,!1);l!==n&&(te(),s=t.scroll,c=t.scrollFn,!0===s&&(s=Q(n,!0),l=s));var f=0,h=s;do{var m,g,v,y,_,w,x,C,j,S=h,T=Ne(S),O=T.top,E=T.bottom,I=T.left,M=T.right,L=T.width,X=T.height;if(S!==k?(m=S.scrollWidth,g=S.scrollHeight,v=ge(S),w=L<m&&("auto"===v.overflowX||"scroll"===v.overflowX),x=X<g&&("auto"===v.overflowY||"scroll"===v.overflowY),C=S.scrollLeft,j=S.scrollTop):(m=A.documentElement.scrollWidth,g=A.documentElement.scrollHeight,v=ge(A.documentElement),w=L<m&&("auto"===v.overflowX||"scroll"===v.overflowX||"visible"===v.overflowX),x=X<g&&("auto"===v.overflowY||"scroll"===v.overflowY||"visible"===v.overflowY),C=A.documentElement.scrollLeft,j=A.documentElement.scrollTop),y=w&&(V(M-d)<=i&&C+L<m)-(V(I-d)<=i&&!!C),_=x&&(V(E-u)<=i&&j+X<g)-(V(O-u)<=i&&!!j),!D[f])for(var $=0;$<=f;$++)D[$]||(D[$]={});D[f].vx==y&&D[f].vy==_&&D[f].el===S||(D[f].el=S,D[f].vx=y,D[f].vy=_,clearInterval(D[f].pid),!S||0==y&&0==_||(p=!0,D[f].pid=setInterval(function(){o&&0===this.layer&&de.active._emulateDragOver(!0);var t=D[this.layer].vy?D[this.layer].vy*a:0,n=D[this.layer].vx?D[this.layer].vx*a:0;"function"==typeof c&&"continue"!==c.call(r,n,t,e,b,D[this.layer].el)||(D[this.layer].el===k?k.scrollTo(k.pageXOffset+n,k.pageYOffset+t):(D[this.layer].el.scrollTop+=t,D[this.layer].el.scrollLeft+=n))}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&h!==k&&(h=Q(h,!1)));P=p}},30),te=function(){D.forEach(function(e){clearInterval(e.pid)}),D=[]},ne=function(e){function t(e,n){return function(o,r,i,a){var s=o.options.group.name&&r.options.group.name&&o.options.group.name===r.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,r,i,a),n)(o,r,i,a);var l=(n?o:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},o=e.group;o&&"object"==typeof o||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},oe=function(t){e&&e.parentNode&&e.parentNode[N]&&e.parentNode[N]._computeIsAligned(t)},re=function(e,t){for(var n=t;!n[N];)n=n.parentNode;return e===n},ie=function(e,t,n){for(var o=e.parentNode;o&&!o[N];)o=o.parentNode;o&&o[N][n](Oe(t,{artificialBubble:!0}))},ae=function(){!W&&n&&ge(n,"display","none")},se=function(){!W&&n&&ge(n,"display","")};A.addEventListener("click",function(e){if(T)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),T=!1,!1},!0);var le,ce=function(t){if(e){var n=function(e,t){for(var n=0;n<O.length;n++)if(!O[n].children.length){var o=Ne(O[n]),r=O[n][N].options.emptyInsertThreshold,i=e>=o.left-r&&e<=o.right+r,a=t>=o.top-r&&t<=o.bottom+r;if(i&&a)return O[n]}}(t.clientX,t.clientY);n&&n[N]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:n,rootEl:n})}};function de(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Oe({},t),e[N]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return K(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:L(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==de.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var o in n)!(o in t)&&(t[o]=n[o]);for(var r in ne(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&U,t.supportPointer?fe(e,"pointerdown",this._onTapStart):(fe(e,"mousedown",this._onTapStart),fe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fe(e,"dragover",this),fe(e,"dragenter",this)),O.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function ue(e,t,n,o){if(e){n=n||A;do{if(">*"===t&&e.parentNode===n||Se(e,t)||o&&e===n)return e;if(e===n)break}while(e=pe(e))}return null}function pe(e){return e.host&&e!==A&&e.host.nodeType?e.host:e.parentNode}function fe(e,t,n){e.addEventListener(t,n,Y)}function he(e,t,n){e.removeEventListener(t,n,Y)}function me(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(M," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(M," ")}}function ge(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return A.defaultView&&A.defaultView.getComputedStyle?n=A.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function ve(e){var t="";do{var n=ge(e,"transform");n&&"none"!==n&&(t=n+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function be(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,i=o.length;if(n)for(;r<i;r++)n(o[r],r);return o}return[]}function ye(e,t,n,r,i,a,s,l,c){var d,u=(e=e||t[N]).options,p="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||H||F?(d=A.createEvent("Event")).initEvent(n,!0,!0):d=new CustomEvent(n,{bubbles:!0,cancelable:!0}),d.to=i||t,d.from=a||t,d.item=r||t,d.clone=o,d.oldIndex=s,d.newIndex=l,d.originalEvent=c,t&&t.dispatchEvent(d),u[p]&&u[p].call(e,d)}function _e(e,t,n,o,r,i,a,s){var l,c,d=e[N],u=d.options.onMove;return!window.CustomEvent||H||F?(l=A.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=r||t,l.relatedRect=i||Ne(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),u&&(c=u.call(d,l,a)),c}function we(e){e.draggable=!1}function xe(){q=!1}function Ce(t,o,r){for(var i=0,a=0,s=t.children;a<s.length;){if("none"!==s[a].style.display&&s[a]!==n&&s[a]!==e&&ue(s[a],r.draggable,t,!1)){if(i===o)return s[a];i++}a++}return null}function je(e){var t=e.lastElementChild;return t===n&&(t=e.children[e.childElementCount-2]),t||null}function De(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Pe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==o&&n++;return n}function Se(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}function Te(e,t){return function(){if(!le){var n=arguments,o=this;le=X(function(){1===n.length?e.call(o,n[0]):e.apply(o,n),le=void 0},t)}}}function Oe(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ee(e){return R&&R.dom?R.dom(e).cloneNode(!0):$?$(e).clone(!0)[0]:e.cloneNode(!0)}function Ie(e){return X(e,0)}function Me(e){return clearTimeout(e)}function Ne(e,t,n){if(e.getBoundingClientRect||e===k){var o,r,i,a,s,l,c;if(e!==k?(r=(o=e.getBoundingClientRect()).top,i=o.left,a=o.bottom,s=o.right,l=o.height,c=o.width):(r=0,i=0,a=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),n&&e!==k){if(t=t||e.parentNode,!H)do{if(t&&t.getBoundingClientRect&&"none"!==ge(t,"transform")){var d=t.getBoundingClientRect();r-=d.top+L(ge(t,"border-top-width")),i-=d.left+L(ge(t,"border-left-width")),a=r+o.height,s=i+o.width;break}}while(t=t.parentNode);var u=ve(e),p=u&&u.a,f=u&&u.d;u&&(a=(r/=f)+(l/=f),s=(i/=p)+(c/=p))}return{top:r,left:i,bottom:a,right:s,width:c,height:l}}}return A.addEventListener("dragover",ce),A.addEventListener("mousemove",ce),de.prototype={constructor:de,_computeIsAligned:function(t){var o;if(n&&!W?(ae(),o=A.elementFromPoint(t.clientX,t.clientY),se()):o=t.target,o=ue(o,this.options.draggable,this.el,!1),!z&&e&&e.parentNode===this.el){for(var r=this.el.children,i=0;i<r.length;i++)ue(r[i],this.options.draggable,this.el,!1)&&r[i]!==o&&(r[i].sortableMouseAligned=Z(t.clientX,t.clientY,r[i],this._getDirection(t,null),this.options));ue(o,this.options.draggable,this.el,!0)||(_=null),z=!0,X(function(){z=!1},30)}},_getDirection:function(t,n){return"function"==typeof this.options.direction?this.options.direction.call(this,t,n,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n,o=this,r=this.el,i=this.options,s=i.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],d=(c||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||d,p=i.filter;if(function(e){G.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&G.push(o)}}(r),(!H||t.artificialBubble||re(r,d))&&!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||i.disabled||u.isContentEditable))if(d=ue(d,i.draggable,r,!1)){if(a!==d){if(n=Pe(d,i.draggable),"function"==typeof p){if(p.call(this,t,d,this))return ye(o,u,"filter",d,r,r,n),void(s&&t.cancelable&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=ue(u,e.trim(),r,!1))return ye(o,e,"filter",d,r,r,n),!0})))return void(s&&t.cancelable&&t.preventDefault());i.handle&&!ue(u,i.handle,r,!1)||this._prepareDragStart(t,c,d,n)}}else H&&ie(r,t,"_onTapStart")}},_handleAutoScroll:function(t,n){if(e&&this.options.scroll){var o=t.clientX,r=t.clientY,i=A.elementFromPoint(o,r),a=this;if(n||F||H){ee(t,a.options,i,n);var s=Q(i,!0);!P||h&&o===m&&r===g||(h&&clearInterval(h),h=setInterval(function(){if(e){var i=Q(A.elementFromPoint(o,r),!0);i!==s&&(s=i,te(),ee(t,a.options,s,n))}},10),m=o,g=r)}else{if(!a.options.bubbleScroll||Q(i,!0)===window)return void te();ee(t,a.options,Q(i,!1),!1)}}},_prepareDragStart:function(n,o,s,l){var c,u=this,f=u.el,h=u.options,m=f.ownerDocument;s&&!e&&s.parentNode===f&&(r=f,t=(e=s).parentNode,i=e.nextSibling,a=s,p=h.group,d=l,v={target:e,clientX:(o||n).clientX,clientY:(o||n).clientY},this._lastX=(o||n).clientX,this._lastY=(o||n).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){u._disableDelayedDrag(),e.draggable=u.nativeDraggable,u._triggerDragStart(n,o),ye(u,r,"choose",e,r,r,d),me(e,h.chosenClass,!0)},h.ignore.split(",").forEach(function(t){be(e,t.trim(),we)}),h.supportPointer?(fe(m,"pointerup",u._onDrop),fe(m,"pointercancel",u._onDrop)):(fe(m,"mouseup",u._onDrop),fe(m,"touchend",u._onDrop),fe(m,"touchcancel",u._onDrop)),h.delay?(fe(m,"mouseup",u._disableDelayedDrag),fe(m,"touchend",u._disableDelayedDrag),fe(m,"touchcancel",u._disableDelayedDrag),fe(m,"mousemove",u._delayedDragTouchMoveHandler),fe(m,"touchmove",u._delayedDragTouchMoveHandler),h.supportPointer&&fe(m,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=X(c,h.delay)):c())},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;J(V(t.clientX-this._lastX),V(t.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),he(e,"mouseup",this._disableDelayedDrag),he(e,"touchend",this._disableDelayedDrag),he(e,"touchcancel",this._disableDelayedDrag),he(e,"mousemove",this._delayedDragTouchMoveHandler),he(e,"touchmove",this._delayedDragTouchMoveHandler),he(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||("touch"==t.pointerType?t:null),!this.nativeDraggable||n?this.options.supportPointer?fe(A,"pointermove",this._onTouchMove):fe(A,n?"touchmove":"mousemove",this._onTouchMove):(fe(e,"dragend",this),fe(r,"dragstart",this._onDragStart));try{A.selection?Ie(function(){A.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(t){if(S=!1,r&&e){this.nativeDraggable&&(fe(A,"dragover",this._handleAutoScroll),fe(A,"dragover",oe));var n=this.options;!t&&me(e,n.dragClass,!1),me(e,n.ghostClass,!0),ge(e,"transform",""),de.active=this,t&&this._appendGhost(),ye(this,r,"start",e,r,r,d)}else this._nulling()},_emulateDragOver:function(t){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!t)return;this._lastX=b.clientX,this._lastY=b.clientY,ae();for(var n=A.elementFromPoint(b.clientX,b.clientY),o=n;n&&n.shadowRoot;)o=n=n.shadowRoot.elementFromPoint(b.clientX,b.clientY);if(o)do{if(o[N])if(o[N]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:n,rootEl:o})&&!this.options.dragoverBubble)break;n=o}while(o=o.parentNode);e.parentNode[N]._computeIsAligned(b),se()}},_onTouchMove:function(e){if(v){if(!e.cancelable)return;var t=this.options,o=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=n&&ve(n),s=n&&a&&a.a,l=n&&a&&a.d,c=(i.clientX-v.clientX+r.x)/(s||1),d=(i.clientY-v.clientY+r.y)/(l||1),u=e.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";if(!de.active&&!S){if(o&&J(V(i.clientX-this._lastX),V(i.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}this._handleAutoScroll(i,!0),y=!0,b=i,ge(n,"webkitTransform",u),ge(n,"mozTransform",u),ge(n,"msTransform",u),ge(n,"transform",u),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!n){var t=Ne(e,this.options.fallbackOnBody?A.body:r,!0),o=(ge(e),this.options);me(n=e.cloneNode(!0),o.ghostClass,!1),me(n,o.fallbackClass,!0),me(n,o.dragClass,!0),ge(n,"box-sizing","border-box"),ge(n,"margin",0),ge(n,"top",t.top),ge(n,"left",t.left),ge(n,"width",t.width),ge(n,"height",t.height),ge(n,"opacity","0.8"),ge(n,"position","fixed"),ge(n,"zIndex","100000"),ge(n,"pointerEvents","none"),o.fallbackOnBody&&A.body.appendChild(n)||r.appendChild(n)}},_onDragStart:function(t,n){var i=this,a=t.dataTransfer,s=i.options;(o=Ee(e)).draggable=!1,o.style["will-change"]="",this._hideClone(),me(o,i.options.chosenClass,!1),i._cloneId=Ie(function(){i.options.removeCloneOnHide||r.insertBefore(o,e),ye(i,r,"clone",e)}),!n&&me(e,s.dragClass,!0),n?(T=!0,i._loopId=setInterval(i._emulateDragOver,50)):(he(A,"mouseup",i._onDrop),he(A,"touchend",i._onDrop),he(A,"touchcancel",i._onDrop),he(A,"pointercancel",i._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(i,a,e)),fe(A,"drop",i),ge(e,"transform","translateZ(0)")),S=!0,i._dragStartId=Ie(i._dragStarted.bind(i,n)),fe(A,"selectstart",i)},_onDragOver:function(o){var a,s,l,c=this.el,u=o.target,h=this.options,m=h.group,g=de.active,v=p===m,b=h.sort,D=this;if(!q&&(!H||o.rootEl||o.artificialBubble||re(c,u))){if(void 0!==o.preventDefault&&o.cancelable&&o.preventDefault(),y=!0,u=ue(u,h.draggable,c,!0),ue(o.target,null,e,!0)||u.animated)return U();if(u!==e&&(T=!1),g&&!h.disabled&&(v?b||(l=!r.contains(e)):f===this||(this.lastPutMode=p.checkPull(this,g,e,o))&&m.checkPut(this,g,e,o))){var S=this._getDirection(o,u);if(a=Ne(e),l)return this._hideClone(),t=r,i?r.insertBefore(e,i):r.appendChild(e),U();if(0===c.children.length||c.children[0]===n||function(e,t,n){var o=Ne(je(n)),r="vertical"===t?e.clientY:e.clientX,i="vertical"===t?e.clientX:e.clientY,a="vertical"===t?o.bottom:o.right,s="vertical"===t?o.left:o.top,l="vertical"===t?o.right:o.bottom;return i>s&&i<l&&r>a}(o,S,c)&&!e.animated){if(0!==c.children.length&&c.children[0]!==n&&c===o.target&&(u=je(c)),u&&(s=Ne(u)),v?g._hideClone():g._showClone(this),!1!==_e(r,c,e,a,u,s,o,!!u))return c.appendChild(e),t=c,j=null,W(),this._animate(a,e),u&&this._animate(s,u),U()}else if(u&&u!==e&&void 0!==u.parentNode[N]&&u!==c){var O,M=0,L=u.sortableMouseAligned,$=e.parentNode!==c,R=function(e,t){var n=Q(n,!0),o=Ne(e)[t];for(;n;){var r=Ne(n)[t];if(!("top"===t||"left"===t?o>=r:o<=r))return!0;if(n===k)break;n=Q(n,!1)}return!1}(u,"vertical"===S?"top":"left");if(_!==u&&(x=null,O=Ne(u)["vertical"===S?"top":"left"],E=!1),function(t,n,o){var r=t===e&&j||Ne(t),i=n===e&&j||Ne(n),a="vertical"===o?r.left:r.top,s="vertical"===o?r.right:r.bottom,l="vertical"===o?r.width:r.height,c="vertical"===o?i.left:i.top,d="vertical"===o?i.right:i.bottom,u="vertical"===o?i.width:i.height;return a===c||s===d||a+l/2===c+u/2}(e,u,S)&&L||$||R||h.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&(I=h.invertSwap||$||P||R),M=function(t,n,o,r,i,a,s){var l=Ne(n),c="vertical"===o?t.clientY:t.clientX,d="vertical"===o?l.height:l.width,u="vertical"===o?l.top:l.left,p="vertical"===o?l.bottom:l.right,f=Ne(e),h=!1;if(!a)if(s&&C<d*r)if(!E&&(1===w?c>u+d*i/2:c<p-d*i/2)&&(E=!0),E)h=!0;else{"vertical"===o?f.top:f.left,"vertical"===o?f.bottom:f.right;if(1===w?c<u+C:c>p-C)return-1*w}else if(c>u+d*(1-r)/2&&c<p-d*(1-r)/2)return c>u+d/2?-1:1;if((h=h||a)&&(c<u+d*i/2||c>p-d*i/2))return c>u+d/2?1:-1;return 0}(o,u,S,h.swapThreshold,null==h.invertedSwapThreshold?h.swapThreshold:h.invertedSwapThreshold,I,_===u),x="swap"):(M=function(t,n){var o=Pe(e,n.draggable),r=Pe(t,n.draggable);return o<r?1:-1}(u,h),x="insert"),0===M)return U();j=null,_=u,w=M,s=Ne(u);var Y=u.nextElementSibling,F=!1,B=_e(r,c,e,a,u,s,o,F=1===M);if(!1!==B)return 1!==B&&-1!==B||(F=1===B),q=!0,X(xe,30),v?g._hideClone():g._showClone(this),F&&!Y?c.appendChild(e):u.parentNode.insertBefore(e,F?Y:u),t=e.parentNode,void 0===O||I||(C=V(O-Ne(u)["vertical"===S?"top":"left"])),W(),!$&&this._animate(s,u),this._animate(a,e),U()}if(c.contains(e))return U()}return H&&!o.rootEl&&ie(c,o,"_onDragOver"),!1}function U(){return g&&(me(e,f?f.options.ghostClass:g.options.ghostClass,!1),me(e,h.ghostClass,!0)),f!==D&&D!==de.active?f=D:D===de.active&&(f=null),(u===e&&!e.animated||u===c&&!u.animated)&&(_=null),h.dragoverBubble||o.rootEl||u===A||(D._handleAutoScroll(o),e.parentNode[N]._computeIsAligned(o)),!h.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),!0}function W(){ye(D,r,"change",u,c,r,d,Pe(e,h.draggable),o)}},_animate:function(t,n){var o=this.options.animation;if(o){var r=Ne(n);if(n===e&&(j=r),1===t.nodeType&&(t=Ne(t)),t.left+t.width/2!==r.left+r.width/2||t.top+t.height/2!==r.top+r.height/2){var i=ve(this.el),a=i&&i.a,s=i&&i.d;ge(n,"transition","none"),ge(n,"transform","translate3d("+(t.left-r.left)/(a||1)+"px,"+(t.top-r.top)/(s||1)+"px,0)"),n.offsetWidth,ge(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ge(n,"transform","translate3d(0,0,0)")}"number"==typeof n.animated&&clearTimeout(n.animated),n.animated=X(function(){ge(n,"transition",""),ge(n,"transform",""),n.animated=!1},o)}},_offUpEvents:function(){var e=this.el.ownerDocument;he(A,"touchmove",this._onTouchMove),he(A,"pointermove",this._onTouchMove),he(e,"mouseup",this._onDrop),he(e,"touchend",this._onDrop),he(e,"pointerup",this._onDrop),he(e,"touchcancel",this._onDrop),he(e,"pointercancel",this._onDrop),he(A,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;S=!1,P=!1,I=!1,E=!1,clearInterval(this._loopId),clearInterval(h),te(),clearTimeout(le),le=void 0,clearTimeout(this._dragStartTimer),Me(this._cloneId),Me(this._dragStartId),he(A,"mousemove",this._onTouchMove),this.nativeDraggable&&(he(A,"drop",this),he(s,"dragstart",this._onDragStart),he(A,"dragover",this._handleAutoScroll),he(A,"dragover",oe)),this._offUpEvents(),a&&(y&&(a.cancelable&&a.preventDefault(),!l.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),(r===t||f&&"clone"!==f.lastPutMode)&&o&&o.parentNode&&o.parentNode.removeChild(o),e&&(this.nativeDraggable&&he(e,"dragend",this),we(e),e.style["will-change"]="",me(e,f?f.options.ghostClass:this.options.ghostClass,!1),me(e,this.options.chosenClass,!1),ye(this,r,"unchoose",e,t,r,d,null,a),r!==t?((u=Pe(e,l.draggable))>=0&&(ye(null,t,"add",e,t,r,d,u,a),ye(this,r,"remove",e,t,r,d,u,a),ye(null,t,"sort",e,t,r,d,u,a),ye(this,r,"sort",e,t,r,d,u,a)),f&&f.save()):e.nextSibling!==i&&(u=Pe(e,l.draggable))>=0&&(ye(this,r,"update",e,t,r,d,u,a),ye(this,r,"sort",e,t,r,d,u,a)),de.active&&(null!=u&&-1!==u||(u=d),ye(this,r,"end",e,t,r,d,u,a),this.save()))),this._nulling()},_nulling:function(){r=e=t=n=i=o=a=s=l=D.length=h=m=g=v=b=y=u=d=_=w=j=f=p=de.active=null,G.forEach(function(e){e.checked=!0}),G.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,r=n.length,i=this.options;o<r;o++)ue(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||De(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,o){var r=n.children[o];ue(r,this.options.draggable,n,!1)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ue(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&ne(n)},destroy:function(){var e=this.el;e[N]=null,he(e,"mousedown",this._onTapStart),he(e,"touchstart",this._onTapStart),he(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(he(e,"dragover",this),he(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),O.splice(O.indexOf(this.el),1),this.el=e=null},_hideClone:function(){o.cloneHidden||(ge(o,"display","none"),o.cloneHidden=!0,o.parentNode&&this.options.removeCloneOnHide&&o.parentNode.removeChild(o))},_showClone:function(t){"clone"===t.lastPutMode?o.cloneHidden&&(r.contains(e)&&!this.options.group.revertClone?r.insertBefore(o,e):i?r.insertBefore(o,i):r.appendChild(o),this.options.group.revertClone&&this._animate(e,o),ge(o,"display",""),o.cloneHidden=!1):this._hideClone()}},fe(A,"touchmove",function(e){(de.active||S)&&e.cancelable&&e.preventDefault()}),de.utils={on:fe,off:he,css:ge,find:be,is:function(e,t){return!!ue(e,t,e,!1)},extend:Oe,throttle:Te,closest:ue,toggleClass:me,clone:Ee,index:Pe,nextTick:Ie,cancelNextTick:Me,detectDirection:K,getChild:Ce},de.create=function(e,t){return new de(e,t)},de.version="1.8.1",de})},"./node_modules/vuedraggable/dist/vuedraggable.js":function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){Array.from||(Array.from=function(e){return[].slice.call(e)});var t=n("./node_modules/sortablejs/Sortable.js");e.exports=function(e){function t(e){e.parentElement.removeChild(e)}function n(e,t,n){var o=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function i(e,t){var n=this;this.$nextTick(function(){return n.$emit(e.toLowerCase(),t)})}var a=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(a,s).map(function(e){return"on"+e}),c=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var n=t[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var o=0,i=t,a=this.$slots,s=a.header,l=a.footer;s&&(o=s.length,i=i?[].concat(r(s),r(i)):[].concat(r(s))),l&&(i=i?[].concat(r(i),r(l)):[].concat(r(l))),this.headerOffset=o;var c=null,d=function(e,t){c=function(e,t,n){return void 0==n?e:((e=null==e?{}:e)[t]=n,e)}(c,e,t)};if(d("attrs",this.$attrs),this.componentData){var u=this.componentData,p=u.on,f=u.props;d("on",p),d("props",f)}return e(this.element,c,i)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var n={};a.forEach(function(e){n["on"+e]=function(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),i.call(t,e,n)}}.call(t,e)}),s.forEach(function(e){n["on"+e]=i.bind(t,e)});var r=o({},this.options,n,{onMove:function(e,n){return t.onDragMove(e,n)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new e(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==l.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,n){if(!e)return[];var o=e.map(function(e){return e.elm}),i=[].concat(r(t)).map(function(e){return o.indexOf(e)});return n?i.filter(function(e){return-1!==e}):i}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(r(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,r=this.getUnderlyingPotencialDraggableComponent(t);if(!r)return{component:r};var i=r.realList,a={list:i,component:r};if(t!==n&&i&&r.getUnderlyingVm){var s=r.getUnderlyingVm(n);if(s)return o(s,a)}return a},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),c=e.item},onDragAdd:function(e){this.updateEvenemt(e);var n=e.item._underlying_vm_;if(void 0!==n){t(e.item);var o=this.getVmIndex(e.newIndex);this.spliceList(o,0,n),this.computeIndexes();var r={element:n,newIndex:o};this.emitChanges({added:r})}},onDragRemove:function(e){if(this.updateEvenemt(e),n(this.rootContainer,e.item,e.oldIndex),this.isCloning)t(e.clone);else{var o=this.context.index;this.spliceList(o,1);var r={element:this.context.element,oldIndex:o};this.resetTransitionData(o),this.emitChanges({removed:r})}},onDragUpdate:function(e){this.updateEvenemt(e),t(e.item),n(e.from,e.item,e.oldIndex);var o=this.context.index,r=this.getVmIndex(e.newIndex);this.updatePosition(o,r);var i={element:this.context.element,oldIndex:o,newIndex:r};this.emitChanges({moved:i})},updateEvenemt:function(e){this.updateProperty(e,"newIndex"),this.updateProperty(e,"oldIndex")},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=[].concat(r(t.to.children)).filter(function(e){return"none"!==e.style.display}),o=n.indexOf(t.related),i=e.component.getVmIndex(o);return-1==n.indexOf(c)&&t.willInsertAfter?i+1:i},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(e),i=this.context,a=this.computeFutureIndex(r,e);return o(i,{futureIndex:a}),o(e,{relatedContext:r,draggedContext:i}),n(e,t)},onDragEnd:function(e){this.computeIndexes(),c=null}}}}(t)}()},0:function(e,t){},1:function(e,t){},2:function(e,t){}})});
//# sourceMappingURL=docupload.js.map