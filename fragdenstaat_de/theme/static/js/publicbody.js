!function(e,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.publicbody=s():(e.Froide=e.Froide||{},e.Froide.components=e.Froide.components||{},e.Froide.components.publicbody=s())}(window,function(){return function(e){function s(s){for(var i,l,c=s[0],n=s[1],a=s[2],d=0,p=[];d<c.length;d++)l=c[d],o[l]&&p.push(o[l][0]),o[l]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);for(u&&u(s);p.length;)p.shift()();return r.push.apply(r,a||[]),t()}function t(){for(var e,s=0;s<r.length;s++){for(var t=r[s],i=!0,c=1;c<t.length;c++){var n=t[c];0!==o[n]&&(i=!1)}i&&(r.splice(s--,1),e=l(l.s=t[0]))}return e}var i={},o={4:0},r=[];function l(s){if(i[s])return i[s].exports;var t=i[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=i,l.d=function(e,s,t){l.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,s){if(1&s&&(e=l(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var i in e)l.d(t,i,function(s){return e[s]}.bind(null,i));return t},l.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(s,"a",s),s},l.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},l.p="";var c=window.webpackJsonp=window.webpackJsonp||[],n=c.push.bind(c);c.push=s,c=c.slice();for(var a=0;a<c.length;a++)s(c[a]);var u=n;return r.push(["../froide/frontend/javascript/publicbody.js",0]),t()}({"../froide/frontend/javascript/components/publicbody/lib/pb-chooser-mixin.js":function(e,s,t){"use strict";var i=t("./node_modules/lodash.debounce/index.js"),o=t.n(i),r=t("./node_modules/vuex/dist/vuex.esm.js"),l=t("../froide/frontend/javascript/store/mutation_types.js"),c={created(){if(this.hasForm&&this.field.value){let e=this.field.objects;e&&(this.cachePublicBodies(e),this.setPublicBodies({publicBodies:e,scope:this.scope}))}},computed:{help_url(){return this.config.url.helpAbout},headers(){return[{key:"name",label:this.i18n.name,sortKey:e=>e.name},{key:"jurisdiction",label:this.i18n.jurisdictionPlural[0],sortKey:e=>e.jurisdiction.name},{key:"classification",label:this.i18n.classificationPlural[0],sortKey:e=>e.classification&&e.classification.name},{key:"categories",label:this.i18n.topicPlural[1],sortKey:e=>e.categories[0]&&e.categories[0].name}]},hasForm(){return void 0!==this.form&&null!==this.form&&""!==this.form},formFields(){return this.form.fields},field(){return this.formFields[this.name]},errors(){return this.form.errors},hasPublicBodies(){return this.publicBodies.length>0},debouncedAutocomplete(){return o()(this.runAutocomplete,300)},hasFilters(){return!!this.filters&&Object.keys(this.filters).length>0},searchFilters(){let e={};if(!this.hasFilters)return e;for(let s in this.filters)null!==this.filters[s]&&0!==this.filters[s].length&&(e[s]=this.filters[s].id);return e},hasSearchResults(){return this.searchResults.length>0},searchResults(){return this.getScopedSearchResults(this.scope)},searchMeta(){return this.getScopedSearchMeta(this.scope)},...Object(r.c)(["getPublicBodyByScope","getScopedSearchResults","getScopedSearchMeta"])},methods:{buildQuery(){let e=this.search;return this.hasFilters&&(e+=JSON.stringify(this.filters)),e},selectAllRows(e){this.searchResults.forEach(s=>{e?this.addPublicBodyId({publicBodyId:s.id,scope:this.scope}):this.removePublicBodyId({publicBodyId:s.id,scope:this.scope})})},clearSelection(){window.confirm(this.i18n.reallyClearSelection)&&(this.clearPublicBodies({scope:this.scope}),this.setStepSelectPublicBody())},triggerAutocomplete(){if(""!==this.search||this.hasFilters||(this.searching=!1),!this.allowEmptySearch&&void 0!==this.search&&this.search.length<3&&!this.hasFilters)return void(this.searching=!1);this.buildQuery()!==this.lastQuery||0===this.searchResults.length?(this.searching=!0,this.debouncedAutocomplete()):this.searching=!1},runAutocomplete(){return this.searching=!0,this.lastQuery=this.buildQuery(),this.getSearchResults({scope:this.scope,search:this.search,filters:this.searchFilters}).then(()=>{this.searching=!1})},clearResults(){this.clearSearchResults({scope:this.scope})},...Object(r.d)({setPublicBody:l.i,setPublicBodies:l.h,setSearchResults:l.k,cachePublicBodies:l.c,clearPublicBodies:l.d,clearSearchResults:l.e,addPublicBodyId:l.a,setStepSelectPublicBody:l.o,removePublicBodyId:l.f}),...Object(r.b)(["getSearchResults"])}};s.a=c},"../froide/frontend/javascript/components/publicbody/lib/pb-list-mixin.js":function(e,s,t){"use strict";var i=t("./node_modules/vuex/dist/vuex.esm.js"),o=t("../froide/frontend/javascript/store/mutation_types.js"),r={computed:{publicBody(){return this.getPublicBodyByScope(this.scope)},publicBodies(){return this.getPublicBodiesByScope(this.scope)},hasPublicBodies(){return this.publicBodies.length>0},searchResults(){return this.getScopedSearchResults(this.scope)},hasSearchResults(){return this.searchResults.length>0},hasNextSearchResults(){let e=this.getScopedSearchMeta(this.scope);return!!e&&e.next},hasPreviousSearchResults(){let e=this.getScopedSearchMeta(this.scope);return!!e&&e.previous},currentResultPage(){let e=this.getScopedSearchMeta(this.scope);return e?e.offset/e.limit+1:0},maxResultPage(){let e=this.getScopedSearchMeta(this.scope);return e?Math.ceil(e.total_count/e.limit):0},currentResultsLength(){let e=this.searchResults;return e?e.length:null},searchResultsLength(){let e=this.getScopedSearchMeta(this.scope);return e?e.total_count:0},emptyResults(){let e=this.searchResultsLength;return null!==e&&0===e},...Object(i.c)(["getPublicBody","getPublicBodyByScope","getPublicBodiesByScope","getScopedSearchResults","getScopedSearchMeta"])},methods:{getNext(e){this.getNextSearchResults(this.scope)},getPrevious(e){this.getPreviousSearchResults(this.scope)},...Object(i.d)({setPublicBody:o.i,clearSearchResults:o.e}),...Object(i.b)(["getNextSearchResults","getPreviousSearchResults"])}};s.a=r},"../froide/frontend/javascript/components/publicbody/pb-action-list.vue?vue&type=style&index=0&id=49f418e4&lang=scss&scoped=true&":function(e,s,t){"use strict";var i=t("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/publicbody/pb-action-list.vue?vue&type=style&index=0&id=49f418e4&lang=scss&scoped=true&");t.n(i).a},"../froide/frontend/javascript/components/publicbody/pb-multi-list.vue?vue&type=style&index=0&id=8a7e4a3e&lang=scss&scoped=true&":function(e,s,t){"use strict";var i=t("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/publicbody/pb-multi-list.vue?vue&type=style&index=0&id=8a7e4a3e&lang=scss&scoped=true&");t.n(i).a},"../froide/frontend/javascript/components/publicbody/pb-result-list.vue?vue&type=style&index=0&id=51bf523e&lang=scss&scoped=true&":function(e,s,t){"use strict";var i=t("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/publicbody/pb-result-list.vue?vue&type=style&index=0&id=51bf523e&lang=scss&scoped=true&");t.n(i).a},"../froide/frontend/javascript/components/publicbody/publicbody-chooser.vue":function(e,s,t){"use strict";var i=t("./node_modules/vuex/dist/vuex.esm.js"),o=t("../froide/frontend/javascript/components/publicbody/lib/pb-list-mixin.js"),r=t("../froide/frontend/javascript/lib/i18n-mixin.js"),l={name:"pb-result-list",props:["name","scope","config"],mixins:[o.a,r.a],computed:{value:{get(){if(this.publicBody)return this.publicBody.id},set(e){this.setPublicBody({publicBody:this.getPublicBody(e),scope:this.scope}),this.clearSearchResults({scope:this.scope})}}},methods:{selectSearchResult(e){this.value=e.target.value}}},c=(t("../froide/frontend/javascript/components/publicbody/pb-result-list.vue?vue&type=style&index=0&id=51bf523e&lang=scss&scoped=true&"),t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),n=Object(c.a)(l,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.publicBody&&!e.hasSearchResults?t("div",{staticClass:"search-result"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"radio","data-label":e.publicBody.name,name:e.name},domProps:{value:e.publicBody.id,checked:e._q(e.value,e.publicBody.id)},on:{change:function(s){e.value=e.publicBody.id}}}),e._v("\n      "+e._s(e.publicBody.name)+"\n      "),t("small",[e._v("\n        "+e._s(e.publicBody.jurisdiction.name)+"\n      ")])])]):e._e(),e._v(" "),e.searchResults.length>0||e.emptyResults?t("ul",{staticClass:"search-results list-unstyled"},e._l(e.searchResults,function(s){return t("li",{key:s.id,staticClass:"search-result"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"radio","data-label":s.name,name:e.name},domProps:{value:s.id,checked:e._q(e.value,s.id)},on:{change:[function(t){e.value=s.id},e.selectSearchResult],click:e.selectSearchResult}}),e._v("\n        "+e._s(s.name)+"\n        "),t("small",[e._v("\n          "+e._s(s.jurisdiction.name)+"\n        ")])])])}),0):e._e()])},[],!1,null,"51bf523e",null);n.options.__file="pb-result-list.vue";var a=n.exports,u=t("../froide/frontend/javascript/store/mutation_types.js"),d={name:"pb-action-list",mixins:[o.a,r.a],props:["name","scope","config"],methods:{selectSearchResult(e){this.setPublicBodyId({publicBodyId:e,scope:this.scope}),this.setStepRequest()},getMakeRequestURLForResult(e){return this.config.url.makeRequestTo.replace(/0/,e.id)},...Object(i.d)({setStepRequest:u.m,setPublicBodyId:u.j})}},p=(t("../froide/frontend/javascript/components/publicbody/pb-action-list.vue?vue&type=style&index=0&id=49f418e4&lang=scss&scoped=true&"),Object(c.a)(d,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"search-result-container"},[e.searchResultsLength>0||e.emptyResults?t("ul",{staticClass:"search-results list-unstyled"},e._l(e.searchResults,function(s){return t("li",{key:s.id,staticClass:"search-result",on:{click:function(t){t.preventDefault(),e.selectSearchResult(s.id)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8"},[t("h4",{staticClass:"pb-heading"},[e._v("\n            "+e._s(s.name)+"\n          ")]),e._v(" "),t("small",[e._v("\n            "+e._s(s.jurisdiction.name)+",\n            "+e._s(e.i18n._("requestCount",{count:s.number_of_requests}))+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("a",{staticClass:"btn btn-primary",attrs:{href:e.getMakeRequestURLForResult(s)},on:{click:function(t){t.preventDefault(),e.selectSearchResult(s.id)}}},[e._v("\n            "+e._s(e.i18n.makeRequest)+"\n          ")])])])])}),0):e._e(),e._v(" "),e.hasSearchResults&&e.maxResultPage>1?t("ul",{staticClass:"pagination"},[e.hasPreviousSearchResults?t("li",{staticClass:"page-item"},[t("a",{staticClass:"page-link prev",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.getPrevious(s)}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("«")]),e._v(" "),t("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.previous))])])]):t("li",{staticClass:"page-item disabled"},[t("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("«")]),e._v(" "),t("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.previous))])])]),e._v(" "),t("li",{staticClass:"page-item disabled"},[t("span",{staticClass:"page-link"},[e._v("\n        "+e._s(e.currentResultPage)+" / "+e._s(e.maxResultPage)+"\n      ")])]),e._v(" "),e.hasNextSearchResults?t("li",{staticClass:"page-item"},[t("a",{staticClass:"page-link next",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.getNext(s)}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("»")]),e._v(" "),t("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.next))])])]):t("li",{staticClass:"page-item disabled"},[t("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"}},[t("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.next))]),e._v(" "),t("span",{attrs:{"aria-hidden":"true"}},[e._v("»")])])])]):e._e()])},[],!1,null,"49f418e4",null));p.options.__file="pb-action-list.vue";var h=p.exports,b={name:"pb-multi-item",props:["name","result","scope"],computed:{value:{get(){return this.isPublicBodySelectedByScope(this.scope,this.result.id)},set(e){e?this.addPublicBodyId({publicBodyId:this.result.id,scope:this.scope}):this.removePublicBodyId({publicBodyId:this.result.id,scope:this.scope})}},...Object(i.c)(["isPublicBodySelectedByScope"])},methods:{selectSearchResult(e){this.value=e.target.value},...Object(i.d)({addPublicBodyId:u.a,removePublicBodyId:u.f})}},f=Object(c.a)(b,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"checkbox","data-label":e.result.name,name:e.name},domProps:{value:e.result.id,checked:Array.isArray(e.value)?e._i(e.value,e.result.id)>-1:e.value},on:{change:function(s){var t=e.value,i=s.target,o=!!i.checked;if(Array.isArray(t)){var r=e.result.id,l=e._i(t,r);i.checked?l<0&&(e.value=t.concat([r])):l>-1&&(e.value=t.slice(0,l).concat(t.slice(l+1)))}else e.value=o}}}),e._v("\n  "+e._s(e.result.name)+"\n  "),t("small",[e._v("\n    "+e._s(e.result.jurisdiction.name)+"\n  ")])])},[],!1,null,null,null);f.options.__file="pb-multi-item.vue";var m=f.exports,v={name:"pb-multi-list",props:["name","scope","config"],mixins:[o.a,r.a],methods:{selectAll(){this.searchResults.forEach(e=>{this.addPublicBodyId({publicBodyId:e.id,scope:this.scope})})},...Object(i.d)({setStepRequest:u.m,addPublicBodyId:u.a})},components:{PbMultiItem:m}},g=(t("../froide/frontend/javascript/components/publicbody/pb-multi-list.vue?vue&type=style&index=0&id=8a7e4a3e&lang=scss&scoped=true&"),Object(c.a)(v,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.searchResults.length>0||e.emptyResults?t("div",[t("div",[t("a",{directives:[{name:"show",rawName:"v-show",value:e.hasPublicBodies,expression:"hasPublicBodies"}],staticClass:"btn btn-primary",attrs:{href:"#step-request"},on:{click:e.setStepRequest}},[e._v("\n        Continue\n      ")]),e._v(" "),e.hasSearchResults?t("a",{staticClass:"btn btn-light pull-right",attrs:{href:"#"},on:{click:e.selectAll}},[e._v("\n        Select all\n      ")]):e._e()]),e._v(" "),t("ul",{staticClass:"search-results list-unstyled"},e._l(e.searchResults,function(s){return t("li",{key:s.id,staticClass:"search-result"},[t("pb-multi-item",{attrs:{name:e.name,result:s,scope:e.scope}})],1)}),0),e._v(" "),e.hasPublicBodies?t("p",[t("a",{staticClass:"btn btn-primary",attrs:{href:"#step-request"},on:{click:e.setStepRequest}},[e._v("\n        Continue\n      ")])]):e._e()]):e._e()])},[],!1,null,"8a7e4a3e",null));g.options.__file="pb-multi-list.vue";var y=g.exports,_={name:"publicbody-chooser",mixins:[t("../froide/frontend/javascript/components/publicbody/lib/pb-chooser-mixin.js").a,r.a],props:["name","scope","defaultsearch","form","config","listView"],data(){return{search:this.defaultsearch,lastQuery:null,emptyResults:!1,searching:!1}},created(){this.setConfig(this.config)},mounted(){this.defaultsearch&&null===this.searchMeta&&this.triggerAutocomplete()},components:{resultList:a,actionList:h,multi:y},computed:{getListView(){return this.listView?this.listView:"resultList"},label(){if(this.publicBody)return this.publicBody.name},publicBody(){return this.getPublicBodyByScope(this.scope)}},methods:{...Object(i.d)({setConfig:u.g})}},S=Object(c.a)(_,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"publicbody-chooser mb-3"},[t("div",{staticClass:"form-search"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search-public_bodies form-control",attrs:{type:"search",placeholder:e.i18n.publicBodySearchPlaceholder},domProps:{value:e.search},on:{keyup:e.triggerAutocomplete,keydown:function(s){return"button"in s||!e._k(s.keyCode,"enter",13,s.key,"Enter")?(s.preventDefault(),e.triggerAutocomplete(s)):null},input:function(s){s.target.composing||(e.search=s.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-primary search-public_bodies-submit",attrs:{type:"button"},on:{click:e.triggerAutocomplete}},[t("i",{staticClass:"fa fa-search"}),e._v("\n          "+e._s(e.i18n.search)+"\n        ")])])])]),e._v(" "),e.searching?t("div",{staticClass:"search-spinner"},[t("img",{attrs:{src:e.config.resources.spinner,alt:"Loading..."}})]):e._e(),e._v(" "),t(e.getListView,{tag:"component",attrs:{name:e.name,scope:e.scope,config:e.config}})],1)},[],!1,null,null,null);S.options.__file="publicbody-chooser.vue";s.a=S.exports},"../froide/frontend/javascript/lib/api.js":function(e,s,t){"use strict";t.d(s,"a",function(){return i});class i{constructor(e){this.config=e}getJson(e){return new Promise((s,t)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=function(){if(i.status>=400)try{return t(JSON.parse(i.responseText))}catch(e){return t(i.responseText)}s(JSON.parse(i.responseText))},i.onerror=function(){t(i.statusText)},i.send()})}getObjects(e){return new Promise((s,t)=>{e.then(e=>s(e.objects)).catch(e=>t(e))})}getJsonObjects(e){return new Promise((s,t)=>{this.getJson(e).then(e=>s(e.objects)).catch(e=>t(e))})}getPublicBody(e){let s=this.config.url.getPublicBody.replace(/\/0\//,`/${e}/`);return this.getJson(s)}autocompletePublicBody(e){let s=encodeURIComponent(e),t=this.config.url.autocompletePublicBody+"?query="+s;return this.getJsonObjects(t)}getUser(){return this.getJson(this.config.url.user)}getJsonForUrl(e,s,t){let i=!1;if(void 0!==s&&s&&(i=!0,e=e+"?q="+encodeURIComponent(s)),void 0!==t){let s=[];for(let e in t){let i=t[e];null!==i&&(Array.isArray(i)||(i=[i]),i.forEach(t=>{s.push(e+"="+encodeURIComponent(t))}))}e+=i?"&":"?",e+=s.join("&")}return this.getJson(e)}searchPublicBodies(e,s){return this.getJsonForUrl(this.config.url.searchPublicBody,e,s)}listPublicBodies(e,s){return this.getJsonForUrl(this.config.url.listPublicBodies,e,s)}getLawsForPublicBodies(e,s){s=s||{};let t={},i=[];return e.forEach(e=>{e.laws.forEach(e=>{if("string"==typeof e){if(void 0!==s[e])return;let o=e.split("/"),r=o[o.length-2];void 0===t[r]&&(t[r]=!0,i.push(r))}})}),0===i.length?Promise.resolve([]):this.getJsonForUrl(this.config.url.listLaws,null,{id:i.join(",")}).then(e=>e.objects)}listJurisdictions(e,s){return this.getJsonForUrl(this.config.url.listJurisdictions,e,s)}listCategories(e,s){return this.getJsonForUrl(this.config.url.listCategories,e,s)}listClassifications(e,s){return this.getJsonForUrl(this.config.url.listClassifications,e,s)}searchFoiRequests(e){let s=encodeURIComponent(e),t=this.config.url.searchRequests+"?q="+s;return this.getJsonObjects(t)}}},"../froide/frontend/javascript/lib/i18n-mixin.js":function(e,s,t){"use strict";const i=new RegExp(/\$\{(\w+)\}/g),o=document.querySelector("html").lang;var r={computed:{i18n(){return{_replacer:e=>(s,t,i,r)=>"count"===t&&e.count>=1e3?e.count.toLocaleString(o):e[t],_(e,s){let t=this[e];return Array.isArray(t)?void 0!==s.count&&(s.count>1||0===s.count)?t[1].replace(i,this._replacer(s)):t[0].replace(i,this._replacer(s)):t.replace(i,this._replacer(s))},...this.config.i18n}}}};s.a=r},"../froide/frontend/javascript/lib/law-select.js":function(e,s,t){"use strict";t.d(s,"a",function(){return o});let i=(e,s)=>e.meta&&s.meta?0:e.meta?-1:s.meta?1:0,o=(e,s)=>{if(0===e.length)return null;let t=e.filter(e=>!s||e.law_type===s);return 0===t.length&&(t=[...e]),(t=t.sort(i))[0]}},"../froide/frontend/javascript/lib/vue-helper.js":function(e,s,t){"use strict";function i(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}function o(e,s){return()=>s(e.tag,{domProps:{innerHTML:e.innerHTML}})}function r(e,s){"string"==typeof e&&(e=document.querySelector(e));const t=function(e){const s=e.attributes,t={};for(let e=0;e<s.length;e+=1){let o=s[e];if("v"===o.name[0]&&"-"===o.name[1])continue;if("id"===o.name||"class"===o.name)continue;let r=o.value,l=o.name;":"===o.name[0]&&(l=o.name.substring(1),"{"!==o.value[0]&&"["!==o.value[0]||(r=JSON.parse(o.value)),"true"===o.value&&(r=!0)),t[i(l)]=r}return t}(e),r=function(e){const s=e.querySelectorAll("[slot]"),t={};for(let e=0;e<s.length;e+=1){let i=s[e];t[i.attributes.slot.value]={tag:i.tagName.toLowerCase(),innerHTML:i.innerHTML}}return t}(e),l=function(e){const s={};if(e.id&&(s.attrs={id:e.id}),e.className){let t=e.className.split(" ");s.class={},t.forEach(e=>{s.class[e.trim()]=!0})}return s}(e);return function(e){const i=function(e,s){const t={};for(let i in e)t[i]=o(e[i],s);return t}(r,e);return e(s,{props:t,scopedSlots:i,...l})}}t.d(s,"a",function(){return r})},"../froide/frontend/javascript/publicbody.js":function(e,s,t){"use strict";t.r(s);var i=t("./node_modules/vue/dist/vue.runtime.esm.js"),o=t("../froide/frontend/javascript/store/index.js"),r=t("../froide/frontend/javascript/store/mutation_types.js"),l=t("../froide/frontend/javascript/lib/vue-helper.js"),c=t("../froide/frontend/javascript/components/publicbody/publicbody-chooser.vue");function n(e){o.a.commit(r.g),new i.a({store:o.a,components:{PublicbodyChooser:c.a},render:Object(l.a)(e,c.a)}).$mount(e)}i.a.config.productionTip=!1;var a=document.querySelectorAll(".publicbody-chooser");for(let e=0;e<a.length;e+=1)n(a[e])},"../froide/frontend/javascript/store/index.js":function(e,s,t){"use strict";var i=t("./node_modules/vue/dist/vue.runtime.esm.js"),o=t("./node_modules/vuex/dist/vuex.esm.js"),r=t("../froide/frontend/javascript/store/mutation_types.js"),l=t("../froide/frontend/javascript/lib/api.js"),c=t("../froide/frontend/javascript/lib/law-select.js");i.a.use(o.a);s.a=new o.a.Store({state:{config:null,scopedSearchResults:{},scopedSearchFacets:{},scopedSearchMeta:{},scopedPublicBodies:{},scopedPublicBodiesMap:{},lawCache:{},publicBodies:{},lawType:null,user:{},step:r.q.SELECT_PUBLICBODY,subject:"",body:"",fullText:!1},getters:{getPublicBodyByScope:(e,s)=>e=>{let t=s.getPublicBodiesByScope(e);return 0===t.length?null:t[0]},getPublicBodiesByScope:(e,s)=>s=>{let t=e.scopedPublicBodies[s];return void 0===t?[]:t},isPublicBodySelectedByScope:e=>(s,t)=>{let i=e.scopedPublicBodiesMap[s];return void 0!==i&&void 0!==i[t]},getPublicBody:e=>s=>e.publicBodies[s],getScopedSearchResults:(e,s)=>s=>{let t=e.scopedSearchResults[s];return void 0===t?[]:t},getScopedSearchFacets:e=>s=>{let t=e.scopedSearchFacets[s];return void 0===t?null:t},getScopedSearchMeta:e=>s=>{let t=e.scopedSearchMeta[s];return void 0===t?null:t},getLawsForPublicBody:e=>s=>s.laws.map(s=>e.lawCache[s]).filter(e=>void 0!==e),defaultLaw:(e,s)=>{var t=null;for(t in e.scopedPublicBodies);let i=e.scopedPublicBodies[t],o=null,r=!0;for(let t=0;t<i.length;t+=1){let l=i[t],n=s.getLawsForPublicBody(l),a=Object(c.a)(n,e.lawType);if(null!==a)if(0!==t){if(o.id!==a.id){r=!1;break}o=a}else o=a}return r?o:null},user:e=>e.user,subject:e=>e.subject,getSubject:e=>()=>e.subject,body:e=>e.body,fullText:e=>e.fullText,stepSelectPublicBody:e=>e.step===r.q.SELECT_PUBLICBODY,stepSelectPublicBodyDone:e=>e.step>r.q.SELECT_PUBLICBODY,stepReviewPublicBodies:e=>e.step===r.q.REVIEW_PUBLICBODY,stepReviewPublicBodiesDone:e=>e.step>r.q.REVIEW_PUBLICBODY,stepWriteRequest:e=>e.step===r.q.WRITE_REQUEST,stepWriteRequestDone:e=>e.step>r.q.WRITE_REQUEST,step:e=>e.step,lawType:e=>e.lawType},mutations:{[r.g](e,s){null!==e.config&&void 0!==e.config||(e.config=s)},[r.l](e,s){e.step=s},[r.o](e){e.step=r.q.SELECT_PUBLICBODY},[r.n](e){e.step=r.q.REVIEW_PUBLICBODY},[r.m](e){e.step=r.q.WRITE_REQUEST},[r.i](e,{publicBody:s,scope:t}){i.a.set(e.scopedPublicBodies,t,[s]),i.a.set(e.scopedPublicBodiesMap,t,{[s.id]:!0}),e.scopedSearchResults[t].forEach(e=>{e.id===s.id?e.isSelected=!0:e.isSelected=!1})},[r.h](e,{publicBodies:s,scope:t}){i.a.set(e.scopedPublicBodies,t,s);let o={};s.forEach(e=>{o[e.id]=!0}),i.a.set(e.scopedPublicBodiesMap,t,o),e.scopedSearchResults[t]&&e.scopedSearchResults[t].forEach(e=>{void 0!==o[e.id]?e.isSelected=!0:e.isSelected=!1})},[r.j](e,{publicBodyId:s,scope:t}){let o=e.publicBodies[s];i.a.set(e.scopedPublicBodies,t,[o]),i.a.set(e.scopedPublicBodiesMap,t,{publicBodyId:!0}),e.scopedSearchResults[t]&&e.scopedSearchResults[t].forEach(e=>{e.id===s?e.isSelected=!0:e.isSelected=!1})},[r.a](e,{publicBodyId:s,scope:t}){let o=e.publicBodies[s];if(void 0===o)return;let r=e.scopedPublicBodies[t];if(void 0===r)i.a.set(e.scopedPublicBodies,t,[o]);else{r.some(e=>e.id===o.id)||i.a.set(e.scopedPublicBodies,t,[...r,...[o]])}i.a.set(e.scopedPublicBodiesMap[t],s,!0),e.scopedSearchResults[t]&&e.scopedSearchResults[t].forEach(e=>{e.id===s&&(e.isSelected=!0)})},[r.f](e,{publicBodyId:s,scope:t}){let o=e.scopedPublicBodies[t];void 0!==o&&(o=o.filter(e=>e.id!==s),i.a.set(e.scopedPublicBodies,t,o),i.a.set(e.scopedPublicBodiesMap[t],s,void 0),e.scopedSearchResults[t]&&e.scopedSearchResults[t].forEach(e=>{e.id===s&&(e.isSelected=!1)}))},[r.d](e,{scope:s}){i.a.set(e.scopedPublicBodies,s,[]),i.a.set(e.scopedPublicBodiesMap,s,{}),e.scopedSearchResults[s]&&e.scopedSearchResults[s].forEach(e=>{e.isSelected=!1})},[r.c](e,s){let t={};s&&(s.forEach(function(e){t[e.id]=e}),e.publicBodies={...e.publicBodies,...t})},[r.k](e,{searchResults:s,searchFacets:t,searchMeta:o,scope:r}){s=s.map(s=>(s.isSelected=void 0!==e.scopedPublicBodiesMap[r][s.id],s)),i.a.set(e.scopedSearchResults,r,s),i.a.set(e.scopedSearchFacets,r,t),i.a.set(e.scopedSearchMeta,r,o)},[r.e](e,{scope:s}){i.a.set(e.scopedSearchResults,s,[]),i.a.set(e.scopedSearchFacets,s,{}),i.a.set(e.scopedSearchMeta,s,null)},[r.v](e,s){e.fullText=s},[r.p](e,s){e.user=s},[r.z](e,s){e.subject=s},[r.s](e,s){e.body=s},[r.u](e,s){i.a.set(e.user,"first_name",s)},[r.w](e,s){i.a.set(e.user,"last_name",s)},[r.r](e,s){i.a.set(e.user,"address",s)},[r.t](e,s){i.a.set(e.user,"email",s)},[r.y](e,s){i.a.set(e.user,"private",s)},[r.A](e,s){i.a.set(e.user,"id",s)},[r.x](e,s){e.lawType=s},[r.b](e,{laws:s}){s.forEach(s=>{i.a.set(e.lawCache,s.resource_uri,s)})}},actions:{setSearchResults({commit:e,state:s,dispatch:t},{scope:i,results:o}){e(r.k,{searchResults:o.objects.results,searchFacets:o.objects.facets.fields,searchMeta:o.meta,scope:i}),e(r.c,o.objects.results),t("getLawsForPublicBodies",o.objects.results)},cacheLaws({commit:e},{laws:s}){e(r.b,{laws:s})},getLawsForPublicBodies({state:e,dispatch:s},t){new l.a(e.config).getLawsForPublicBodies(t,e.lawCache).then(e=>{s("cacheLaws",{laws:e})})},getSearchResults:({commit:e,state:s,dispatch:t},{scope:i,search:o,filters:c})=>(e(r.e,{scope:i}),new l.a(s.config).searchPublicBodies(o,c).then(e=>{t("setSearchResults",{results:e,scope:i})})),setPublicBodyById:({state:e,dispatch:s},{scope:t,id:i})=>new l.a(e.config).getPublicBody(i).then(e=>{s("setPublicBodyByIdDone",{result:e,scope:t,id:i})}),setPublicBodyByIdDone({commit:e,dispatch:s},{scope:t,result:i,id:o}){e(r.c,[i]),e(r.j,{publicBodyId:o,scope:t}),e(r.m),s("getLawsForPublicBodies",[i])},getSearchResultsUrl:({commit:e,state:s,getters:t,dispatch:i},{scope:o,url:c})=>(e(r.e,{scope:o}),new l.a(s.config).getJson(c).then(e=>{i("setSearchResults",{results:e,scope:o})})),getNextSearchResults:({state:e,getters:s,dispatch:t},i)=>t("getSearchResultsUrl",{url:s.getScopedSearchMeta(i).next,scope:i}),getPreviousSearchResults:({state:e,getters:s,dispatch:t},i)=>t("getSearchResultsUrl",{url:s.getScopedSearchMeta(i).previous,scope:i})},strict:!1})},"../froide/frontend/javascript/store/mutation_types.js":function(e,s,t){"use strict";t.d(s,"g",function(){return i}),t.d(s,"l",function(){return o}),t.d(s,"o",function(){return r}),t.d(s,"n",function(){return l}),t.d(s,"m",function(){return c}),t.d(s,"i",function(){return n}),t.d(s,"j",function(){return a}),t.d(s,"a",function(){return u}),t.d(s,"f",function(){return d}),t.d(s,"d",function(){return p}),t.d(s,"h",function(){return h}),t.d(s,"c",function(){return b}),t.d(s,"b",function(){return f}),t.d(s,"x",function(){return m}),t.d(s,"k",function(){return v}),t.d(s,"e",function(){return g}),t.d(s,"z",function(){return y}),t.d(s,"s",function(){return _}),t.d(s,"v",function(){return S}),t.d(s,"p",function(){return B}),t.d(s,"u",function(){return j}),t.d(s,"w",function(){return P}),t.d(s,"t",function(){return R}),t.d(s,"r",function(){return x}),t.d(s,"y",function(){return E}),t.d(s,"A",function(){return C}),t.d(s,"q",function(){return w});const i="SET_CONFIG",o="SET_STEP",r="SET_STEP_SELECT_PUBLICBODY",l="SET_STEP_REVIEW_PUBLICBODY",c="SET_STEP_REQUEST",n="SET_PUBLICBODY",a="SET_PUBLICBODY_ID",u="ADD_PUBLICBODY_ID",d="REMOVE_PUBLICBODY_ID",p="CLEAR_PUBLICBODIES",h="SET_PUBLICBODIES",b="CACHE_PUBLICBODIES",f="CACHE_LAWS",m="UPDATE_LAW_TYPE",v="SET_SEARCHRESULTS",g="CLEAR_SEARCHRESULTS",y="UPDATE_SUBJECT",_="UPDATE_BODY",S="UPDATE_FULL_TEXT",B="SET_USER",j="UPDATE_FIRST_NAME",P="UPDATE_LAST_NAME",R="UPDATE_EMAIL",x="UPDATE_ADDRESS",E="UPDATE_PRIVATE",C="UPDATE_USER_ID",w={SELECT_PUBLICBODY:1,REVIEW_PUBLICBODY:2,WRITE_REQUEST:3}},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/publicbody/pb-action-list.vue?vue&type=style&index=0&id=49f418e4&lang=scss&scoped=true&":function(e,s,t){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/publicbody/pb-multi-list.vue?vue&type=style&index=0&id=8a7e4a3e&lang=scss&scoped=true&":function(e,s,t){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js?!./node_modules/resolve-url-loader/index.js?!./node_modules/sass-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!../froide/frontend/javascript/components/publicbody/pb-result-list.vue?vue&type=style&index=0&id=51bf523e&lang=scss&scoped=true&":function(e,s,t){}})});
//# sourceMappingURL=publicbody.js.map